"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1309],{19113:function(n,o,t){t.d(o,{a$:function(){return g},BT:function(){return f},_m:function(){return b},Og:function(){return h},xd:function(){return m},Eu:function(){return s},yo:function(){return v},yY:function(){return p},$d:function(){return u}});var e=t(82729),i=t(72071),l=t(94589),r=t(97616);function _templateObject(){var n=(0,e._)(["\n  0% {\n    transform: scale(0.9);\n    box-shadow: 0 0 0 0 rgba(255 255 255 / .5);\n  }\n  70% {\n    transform: scale(1);\n    box-shadow: 0 0 0 50px rgba(255 255 255 / 0);\n  }\n  100% {\n    transform: scale(0.9);\n    box-shadow: 0 0 0 0 rgba(255 255 255 / 0);\n  }\n"]);return _templateObject=function(){return n},n}function _templateObject1(){var n=(0,e._)(["\n  from {\n    transform: translateY(0px);\n  }\n  to {\n    transform: translateY(",");\n  }\n"]);return _templateObject1=function(){return n},n}function _templateObject2(){var n=(0,e._)(["\n  from {\n    stroke-dashoffset: 800;\n  }\n  to {\n    stroke-dashoffset: 0;\n  }\n"]);return _templateObject2=function(){return n},n}function _templateObject3(){var n=(0,e._)(["\n  0% {\n    box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.5);\n  }\n  70%,\n  100% {\n    box-shadow: 0 0 0 10px rgba(255, 255, 255, 0);\n  }\n"]);return _templateObject3=function(){return n},n}var a=(0,l.F4)(_templateObject()),c=(0,l.F4)(_templateObject2()),d=(0,l.F4)(_templateObject3());function styled_templateObject(){var n=(0,e._)(["\n      background-color: ",";\n      border: 2px solid #ffffff;\n      box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.25);\n    "]);return styled_templateObject=function(){return n},n}function styled_templateObject1(){var n=(0,e._)(["\n        fill: ",";\n      "]);return styled_templateObject1=function(){return n},n}function styled_templateObject2(){var n=(0,e._)(["\n  ",";\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  ","\n  &.star span.icon {\n    margin-top: 7%;\n  }\n  &.triangle span.icon {\n    margin-top: 10%;\n  }\n  &.yinyang span.icon {\n    display: none;\n  }\n  &.diamond span.icon {\n    margin-top: -8%;\n  }\n  svg {\n    width: 100%;\n    height: 100%;\n    overflow: visible;\n    filter: drop-shadow(0px 4px 6px rgba(0, 0, 0, 0.4));\n    path {\n      stroke: #fff;\n      stroke-width: 46px;\n      ","\n    }\n  }\n  .icon {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    i {\n      color: "," !important;\n    }\n  }\n"]);return styled_templateObject2=function(){return n},n}function styled_templateObject3(){var n=(0,e._)(["\n  width: 100%;\n  height: auto;\n"]);return styled_templateObject3=function(){return n},n}function _templateObject4(){var n=(0,e._)(["\n  width: 100%;\n  height: 100%;\n"]);return _templateObject4=function(){return n},n}function _templateObject5(){var n=(0,e._)(["\n        fill: ",";\n      "]);return _templateObject5=function(){return n},n}function _templateObject6(){var n=(0,e._)(["\n        fill: ",";\n      "]);return _templateObject6=function(){return n},n}function _templateObject7(){var n=(0,e._)(["\n  position: relative;\n  svg {\n    ","\n  }\n  path {\n    ","\n  }\n  img {\n    position: absolute;\n    border-radius: 50%;\n    height: auto;\n    width: 70%;\n    height: auto;\n    aspect-ratio: 1/1;\n    left: 0;\n    right: 0;\n    top: 10%;\n    margin: auto;\n  }\n  #id_marker1 {\n    img {\n      top: 11%;\n    }\n  }\n  #id_marker2 {\n    img {\n      top: 9%;\n      border-radius: 10%;\n    }\n  }\n  #id_marker3 {\n    img {\n      top: 9.5%;\n    }\n  }\n  #id_marker4 {\n    img {\n      top: 11%;\n    }\n  }\n  #id_marker5 {\n    img {\n      top: 11%;\n    }\n  }\n  #id_marker6 {\n    img {\n      top: 8%;\n    }\n  }\n  #id_marker7 {\n    img {\n      top: 9.5%;\n    }\n  }\n  #id_marker8 {\n    img {\n      top: 12%;\n    }\n  }\n  #id_marker9 {\n    img {\n      top: 12%;\n    }\n  }\n  #id_marker10 {\n    img {\n      top: 9%;\n    }\n  }\n  #id_marker11 {\n    img {\n      top: 10.5%;\n    }\n  }\n  #id_marker12 {\n    img {\n      top: 10%;\n    }\n  }\n  #id_marker13 {\n    img {\n      top: 10%;\n    }\n  }\n  #id_marker14 {\n    img {\n      top: 11.5%;\n    }\n  }\n  #id_marker15 {\n    img {\n      top: 7.5%;\n    }\n  }\n  #id_marker16 {\n    img {\n      border-radius: 10%;\n      top: 10%;\n      width: 64%;\n    }\n  }\n"]);return _templateObject7=function(){return n},n}function _templateObject8(){var n=(0,e._)(["\n  background: ",";\n  border: 2px solid #ffffff;\n  box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.25);\n  border-radius: 50%;\n  ",";\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n  transition: var(--transition-smooth);\n  i {\n    font-size: 18px;\n    color: ",";\n  }\n  @media (hover: hover) and (pointer: fine) {\n    &:hover {\n      transform: scale(1.2);\n    }\n  }\n"]);return _templateObject8=function(){return n},n}function _templateObject9(){var n=(0,e._)(["\n      visibility: hidden;\n    "]);return _templateObject9=function(){return n},n}function _templateObject10(){var n=(0,e._)(["\n  ","\n  position: relative;\n  width: ","px;\n  height: ",";\n  .content {\n    width: 100%;\n    height: 100%;\n    opacity: ",";\n    transform: rotate(","deg);\n    ",", "," {\n      i {\n        font-size: ","px;\n      }\n    }\n    animation-iteration-count: infinite;\n    animation-duration: var(--animate-duration) !important;\n    ",";\n    &.pulse-grow {\n      box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.25);\n      animation: "," 1.5s infinite;\n      animation-duration: 1500ms !important;\n    }\n    &.raise {\n      box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.25);\n      animation: ","\n        500ms infinite alternate cubic-bezier(0.2, 0.65, 0.6, 1);\n      animation-duration: 2000ms !important;\n    }\n    border-radius: 50%;\n    position: relative;\n  }\n  .--title {\n    color: #fff;\n    top: -32px;\n    left: 50%;\n    // min-width: 100%;\n    font-weight: 600;\n    text-align: center;\n    position: absolute;\n    white-space: nowrap;\n    background: rgba(0, 0, 0, 0.35);\n    border-radius: 4px;\n    padding: 4px 6px;\n    z-index: 20;\n    transform: translate(-50%);\n    text-shadow: 0 1px 4px #000;\n    em {\n      color: #fff;\n      text-align: center;\n      font-style: initial;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  }\n"]);return _templateObject10=function(){return n},n}function _templateObject11(){var n=(0,e._)(["\n  width: "," !important;\n  max-width: unset !important;\n  height: "," !important;\n  transform: ","\n    rotate(","deg);\n  background-color: ",";\n  opacity: ",";\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 20;\n  transform-origin: 0 0;\n  .target {\n    width: 100%;\n    height: 100%;\n    object-fit: ",";\n  }\n  i {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    margin: auto;\n    z-index: 30;\n    color: #fff;\n    background: rgb(0 0 0 / 0.5);\n    width: 5rem;\n    height: 5rem;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 1.5rem;\n    transition: var(--transition-smooth);\n    transform: scale(0.5);\n    opacity: 0;\n    cursor: pointer;\n  }\n  @media (hover: hover) and (pointer: fine) {\n    &:hover {\n      i {\n        transform: scale(1);\n        opacity: 1;\n      }\n    }\n  }\n  @media (hover: none) {\n    i {\n      transform: scale(1);\n      opacity: 1;\n    }\n  }\n"]);return _templateObject11=function(){return n},n}function _templateObject12(){var n=(0,e._)(["\n  width: 50%;\n  height: 50%;\n  .calloutWrapper {\n    width: 100%;\n    height: 100%;\n    .point {\n      width: 100%;\n      height: 100%;\n      .--dot {\n        width: 100%;\n        height: 100%;\n        background: #fff;\n        border-radius: 50%;\n        animation: "," ease-out 3s forwards infinite;\n      }\n    }\n    .--main {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%)\n        rotate(","deg);\n      transform-origin: left bottom;\n    }\n    .line {\n      width: 0;\n      height: 2px;\n      background-color: #fff;\n      top: 50%;\n      transform: translateY(-50%);\n      position: absolute;\n      left: 50%;\n      transition: var(--transition-smooth);\n    }\n    .--content {\n      position: absolute;\n      left: 120px;\n      top: 50%;\n      &.--type-text {\n        height: 2px;\n        transform-origin: bottom left;\n        transform: translateY(-50%)\n          rotate(","deg);\n        .--img {\n          display: none;\n        }\n        .--line {\n          width: 0;\n          // width: 100%;\n          height: 2px;\n          margin-left: -1px;\n          background-color: #fff;\n          transition: var(--transition-smooth);\n          svg {\n            display: none;\n          }\n        }\n        .--text {\n          width: 0;\n          transition: var(--transition-smooth);\n          overflow: hidden;\n          pointer-events: none;\n          transform: translateY(calc(-100% + 20px));\n          &:after {\n            content: '';\n            width: 2px;\n            height: 0;\n            background: #fff;\n            display: block;\n            transition: var(--transition-smooth);\n            position: absolute;\n            top: 50%;\n            transform: translateY(-50%);\n          }\n        }\n        .--inner {\n          width: max-content;\n          pointer-events: auto;\n          position: relative;\n          max-width: 280px;\n          @media (max-width: 575px) {\n            max-width: 200px;\n          }\n        }\n        .--mainTitle {\n          background: var(--color-primary);\n          color: var(--color-text);\n          display: block;\n          padding: 4px 12px;\n          width: max-content;\n          // margin-bottom: 6px;\n          font-size: 0.9rem;\n          font-weight: 700;\n          line-height: 20px;\n          max-width: 100%;\n          width: 100%;\n        }\n        article {\n          color: #fff;\n          font-weight: 500;\n          text-shadow: 0 1px 4px #000;\n          max-width: 100%;\n          background: rgba(0, 0, 0, 0.35);\n          padding: 10px;\n        }\n      }\n      &.--type-img {\n        transform: translate(-20px, -50%)\n          rotate(","deg);\n        width: 120px;\n        height: 120px;\n        .--line {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n          width: calc(100% + 10px);\n          height: calc(100% + 10px);\n          z-index: -1;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          svg {\n            display: block;\n            width: 120px;\n            height: 120px;\n            @media (max-width: 575px) {\n              circle {\n                stroke-width: 4px;\n                /* r: 60px; */\n              }\n            }\n          }\n          #path {\n            stroke-dasharray: 800;\n            opacity: 0;\n          }\n        }\n        .--text {\n          display: none;\n        }\n        .--img {\n          width: 0;\n          height: 0;\n          overflow: hidden;\n          border-radius: 50%;\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          margin: auto;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          transition: var(--transition-smooth);\n        }\n        .--inner {\n          width: max-content;\n          height: max-content;\n          pointer-events: auto;\n          position: relative;\n        }\n      }\n\n      .--img {\n        .--inner {\n          img {\n            width: 110px;\n            height: 110px;\n            border-radius: 50%;\n            object-fit: cover;\n            @media (max-width: 575px) {\n              width: 110px;\n              height: 110px;\n            }\n          }\n        }\n      }\n    }\n    &.active {\n      width: 120px;\n      height: 120px;\n      .line {\n        width: 120px;\n      }\n    }\n    &.show {\n      .line {\n        width: 120px;\n      }\n      .--content {\n        &.--type-text {\n          .--line {\n            /* width: 100%; */\n            /* transition-delay: 0.8s; */\n          }\n          .--text {\n            width: 100%;\n            transition-delay: 0.8s;\n            &:after {\n              height: 100%;\n              transition-delay: 0.8s;\n            }\n          }\n        }\n        &.--type-img {\n          .--img {\n            width: 100%;\n            height: 100%;\n            opacity: 1;\n            transition-delay: 0.8s;\n            img {\n            }\n          }\n          #path {\n            opacity: 1;\n            animation: "," 2s ease-out forwards;\n            animation-delay: 0.5s;\n            transition-delay: 0.5s;\n          }\n        }\n      }\n    }\n  }\n"]);return _templateObject12=function(){return n},n}function _templateObject13(){var n=(0,e._)(["\n  .compactHotspotWrapper {\n    pointer-events: none;\n    width: 2rem;\n    height: 1.5rem;\n    .--mainMarker {\n      width: 2rem;\n      height: 2rem;\n      // border: 5px solid var(--color-primary);\n      border: 5px solid #fff;\n      border-radius: 50%;\n      box-shadow: 0px 0px 4px 4px rgba(0, 0, 0, 0.5);\n      position: relative;\n      left: 50%;\n      transform: translateX(-50%);\n      position: relative;\n      pointer-events: auto;\n      animation: pulse ease-out 3s forwards infinite;\n      @keyframes pulse {\n        0% {\n          box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.5);\n        }\n        70%,\n        100% {\n          box-shadow: 0 0 0 10px rgba(255, 255, 255, 0);\n        }\n      }\n    }\n    .--revealMarkers {\n      display: flex;\n      gap: 8px;\n      pointer-events: none;\n      width: max-content;\n      height: max-content;\n      padding: 0.5rem 0;\n      left: 50%;\n      transform: translateX(-50%);\n      position: relative;\n    }\n    .--itemDetailMarker {\n      opacity: 0;\n      transform: scale(0.5);\n      transition: var(--transition-smooth);\n      flex: 0 0 auto;\n      pointer-events: auto;\n      i {\n        background: rgba(0, 0, 0, 0.5);\n        border: 1px solid rgba(255, 255, 255, 0.5);\n        color: #fff;\n        width: 2rem;\n        height: 2rem;\n        border-radius: 50%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: var(--transition-regular);\n      }\n      &:nth-child(1) {\n        transition-delay: 0s;\n      }\n      &:nth-child(2) {\n        transition-delay: 0.05s;\n      }\n      &:nth-child(3) {\n        transition-delay: 0.1s;\n      }\n      &:nth-child(4) {\n        transition-delay: 0.15s;\n      }\n      &:nth-child(5) {\n        transition-delay: 0.2s;\n      }\n      &:nth-child(6) {\n        transition-delay: 0.25s;\n      }\n      &:nth-child(7) {\n        transition-delay: 0.3s;\n      }\n      &:nth-child(8) {\n        transition-delay: 0.35s;\n      }\n      &:nth-child(9) {\n        transition-delay: 0.4s;\n      }\n      &:nth-child(10) {\n        transition-delay: 0.45s;\n      }\n    }\n\n    &:hover {\n      .--revealMarkers {\n        pointer-events: auto;\n      }\n      .--itemDetailMarker {\n        opacity: 1;\n        transform: scale(1);\n        &:hover {\n          i {\n            //   transform: scale(1.2);\n            background: var(--color-primary);\n            border-color: transparent;\n            box-shadow: 0 0 10px rgba(0, 0, 0, 0.7);\n          }\n        }\n      }\n    }\n  }\n"]);return _templateObject13=function(){return n},n}var u=l.ZP.div.withConfig({displayName:"styled__ShapeIconWrapper",componentId:"Panoee__sc-6c50a7e7-0"})(styled_templateObject2(),i.b0,function(n){return!n.isRenderShape&&(0,l.iv)(styled_templateObject(),n.bgColor||"var(--color-red)")},function(n){return(0,l.iv)(styled_templateObject1(),n.bgColor||"var(--color-red)")},function(n){return n.iconColor||"#fff"}),s=l.ZP.img.withConfig({displayName:"styled__ImageIconWrapper",componentId:"Panoee__sc-6c50a7e7-1"})(styled_templateObject3()),v=l.ZP.div.withConfig({displayName:"styled__LottieIconWrapper",componentId:"Panoee__sc-6c50a7e7-2"})(_templateObject4()),p=l.ZP.div.withConfig({displayName:"styled__MarkerIconWrapper",componentId:"Panoee__sc-6c50a7e7-3"})(_templateObject7(),function(n){return n.color&&(0,l.iv)(_templateObject5(),n.color)},function(n){return n.color&&(0,l.iv)(_templateObject6(),n.color)}),f=l.ZP.div.withConfig({displayName:"styled__DefaultIconWrapper",componentId:"Panoee__sc-6c50a7e7-4"})(_templateObject8(),function(n){return n.bgColor||r.n$},i.b0,function(n){return n.iconColor||r.IM}),m=l.ZP.div.withConfig({displayName:"styled__HotspotWrapper",componentId:"Panoee__sc-6c50a7e7-5"})(_templateObject10(),function(n){return n.isHidden&&(0,l.iv)(_templateObject9())},function(n){return("image"===n.type?24:"marker"===n.type?20:"lottie"===n.type?32:"icon-shape"===n.type?14.7:10.7)*(n.size||3)},function(n){return"image"===n.type||"marker"===n.type||"lottie"===n.type?"auto":"icon-shape"===n.type?"".concat(14.7*(n.size||3),"px"):"".concat(10.7*(n.size||3),"px")},function(n){return n.opacity},function(n){return n.rotate},u,f,function(n){return 4.7*(n.size||3)},i.b0,a,function(n){var o;return o="image"===n.type?"auto":"".concat(14*(n.size||3),"px"),(0,l.F4)(_templateObject1(),o)}),h=l.ZP.div.withConfig({displayName:"styled__HotspotMediaWrapper",componentId:"Panoee__sc-6c50a7e7-6"})(_templateObject11(),function(n){return n.width},function(n){return n.height},function(n){return n.transform},function(n){return n.rotate||0},function(n){return n.backgroundColor},function(n){return n.opacity},function(n){return n.displayType}),g=l.ZP.div.withConfig({displayName:"styled__CalloutIconWrapper",componentId:"Panoee__sc-6c50a7e7-7"})(_templateObject12(),d,function(n){return n.degrees||45},function(n){return-(n.degrees||45)},function(n){return-(n.degrees||45)},c),b=l.ZP.div.withConfig({displayName:"styled__HotspotCompactWrapper",componentId:"Panoee__sc-6c50a7e7-8"})(_templateObject13())},81309:function(n,o,t){t.r(o),t.d(o,{default:function(){return no}});var e,i,l=t(91309),r=t(85893),a=t(5152),c=t.n(a),d=t(67294),u=t(25617),s=t(61935),v=t(226),p=t(86111),f=t(72253),m=t(14932),h=t(43376),g=t(82729),b=t(94589);function _templateObject(){var n=(0,g._)(["\n  width: 100%;\n  position: relative;\n  height: 100%;\n  z-index: 1;\n\n  .--pane {\n    top: 0;\n    position: absolute;\n    height: 100%;\n    width: 100%;\n  }\n  img {\n    user-select: none;\n  }\n  .--first-photo-container,\n  .--second-photo-container {\n    background: transparent;\n    > img {\n      width: 100%;\n      -moz-user-select: none;\n      -webkit-user-select: none;\n      user-select: none;\n    }\n  }\n  .--delimiter {\n    position: absolute;\n    height: 100%;\n    background: #fff;\n    width: 5px;\n    top: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .--delimiter-icon {\n    width: 25px;\n    height: 25px;\n    border-radius: 50%;\n    background: #fff;\n    cursor: col-resize;\n  }\n\n  .--size-fix-img {\n    width: 100%;\n    opacity: 0;\n  }\n"]);return _templateObject=function(){return n},n}var w=b.ZP.div.withConfig({displayName:"styled__BeforeAfterSliderWrapper",componentId:"Panoee__sc-d3aad712-0"})(_templateObject());function BeforeAfterSlider(n){var o,t,e=n.scenes,i=void 0===e?[]:e,a=n.firstPane,c=n.onVisible,u=n.classNames,s=n.nadirConfig,v=n.delimiterColor,p=n.withResizeFeel,f=n.mode,m=void 0===f?"slide":f,g=(0,d.useRef)(null),b=(0,d.useRef)(null),_=(0,l._)((0,d.useState)(null),2),y=_[0],x=_[1],k=(0,l._)((0,d.useState)([]),2),C=k[0],j=k[1],S=(0,l._)((0,d.useState)("default"),2),A=S[0],O=S[1],L=(0,l._)((0,d.useState)({top:0,left:0}),2),M=L[0],T=L[1],P=(0,d.useMemo)(function(){var n;return"split"===m?{width:100-(null===(n=C||[])||void 0===n?void 0:n.reduce(function(n,o){return n+(null==o?void 0:o.width)||0},0)),left:null==C?void 0:C.reduce(function(n,o){return n+o.width},0)}:{width:"100%",left:"0"}},[m,C]),E=(0,l._)((0,d.useState)(c&&window.IntersectionObserver?new IntersectionObserver(function(n){E&&c&&n.forEach(function(n){n.intersectionRatio>.95&&(E.disconnect(),c())})},{threshold:[0,.95]}):null),1)[0];(0,d.useEffect)(function(){E&&E.observe(g.current)},[E]),(0,d.useEffect)(function(){if(y){for(var n=[],o=Number(100/(i.length+1)),t=0;t<i.length;t+=1)if(0===t)n.push({width:o,left:0});else{var e=o*t;n.push({width:o,left:e})}j(n)}},[y,i]);var updateContainerWidth=function(){g.current&&x(g.current.offsetWidth)};o=function(){O("default")},(0,d.useEffect)(function(){return updateContainerWidth(),document.addEventListener("click",o),function(){document.removeEventListener("click",o)}},[o,updateContainerWidth]);var z={backgroundColor:v},I={backgroundColor:v,right:0},updateContainerPosition=function(){if(g.current){var n=g.current.getBoundingClientRect();T({top:n.top+window.pageYOffset,left:n.left+window.pageXOffset})}},onMouseDownHandler=function(n){updateContainerPosition(),O("move"),b.current||(b.current=[]),b.current.itemActive=n},onMoveHandler=function(n){if("move"===A&&y){var o,t=(n.pageX-M.left)/y*100;(null===(o=b.current)||void 0===o?void 0:o.itemActive)===C.length-1?j(function(n){return n.map(function(n,o){var e;if(o===(null===(e=b.current)||void 0===e?void 0:e.itemActive)){var i={width:t-(C.map(function(n){return n.width||0}).reduce(function(n,o){return n+o},0)-n.width),left:n.left};if(i.width>5)return i}return n})}):j(function(n){return n.map(function(o,e){var i;if(b.current&&e===(null===(i=b.current)||void 0===i?void 0:i.itemActive)){b.current.totalWidthCurrentAndNextItem=o.width+n[e+1].width,b.current.totalWidthItemsLtCurrent=n.filter(function(n,o){var t;return o<(null===(t=b.current)||void 0===t?void 0:t.itemActive)}).map(function(n){return n.width||0}).reduce(function(n,o){return n+o},0),b.current.currentWidthOld=o.width,b.current.currentWidthNew=0===b.current.itemActive?t:t-b.current.totalWidthItemsLtCurrent;var l={width:b.current.currentWidthNew,left:o.left};if(b.current.isUpdateNextItem=!1,l.width>5&&l.width<b.current.totalWidthCurrentAndNextItem-5)return b.current.isUpdateNextItem=!0,l}if(b.current&&e===b.current.itemActive+1){var r={width:o.width+b.current.currentWidthOld-b.current.currentWidthNew,left:b.current.totalWidthItemsLtCurrent+b.current.currentWidthNew};if(b.current.isUpdateNextItem)return r}return o})})}};return t=void 0===p||p,(0,d.useEffect)(function(){return t&&window.addEventListener("resize",updateContainerWidth),function(){window.removeEventListener("resize",updateContainerWidth)}},[updateContainerWidth,t]),(0,r.jsx)(w,{ref:g,className:u,onMouseMove:function(n){n.preventDefault(),onMoveHandler(n)},onTouchMove:function(n){onMoveHandler(n.touches[0])},children:C&&!!y&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"--pane --first-photo-container",style:{width:"".concat(P.width,"%"),left:"".concat(P.left,"%"),zIndex:0},children:a}),i.map(function(n,o){var t,e,l;return(0,r.jsxs)("div",{className:"--pane --second-photo-container",style:{width:"".concat((null===(t=C[o])||void 0===t?void 0:t.width)||0,"%"),left:"".concat((null===(e=C[o])||void 0===e?void 0:e.left)||0,"%"),zIndex:i.length-o},children:[(0,r.jsx)("div",{style:{width:"100%",height:"100%",overflow:"hidden",position:"relative"},children:(0,r.jsx)(h.default,{urlTour:n.urlTour||"",scene:n||void 0,krpanoId:"krpanoView_".concat(o),divId:"krpanoContainer_".concat(o),styleContainer:{height:"100%",position:"absolute",left:"slide"===m?"calc(-1vw * ".concat(null===(l=C[o])||void 0===l?void 0:l.left,")"):"0",top:0,width:"slide"===m?"100vw":"100%"},nadirConfig:s})}),(0,r.jsx)("div",{className:"--delimiter",style:I,children:"slide"===m&&(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"--delimiter-icon",onMouseDown:function(){return onMouseDownHandler(o)},onTouchStart:function(){return onMouseDownHandler(o)},style:z})})})]},n.id)})]})})}(e=i||(i={})).MOVE="move",e.DEFAULT="default";var _=t(11010),y=t(97582),x=t(15924),k=t(97762),C=t(20745),j=t(58673),S=t(83403),A=t(62443),O=t(82502),L=t(24018),M=c()(function(){return Promise.all([t.e(5400),t.e(5928)]).then(t.bind(t,55305))},{loadableGenerated:{webpack:function(){return[55305]}}}),T=c()(function(){return t.e(5387).then(t.bind(t,15387))},{loadableGenerated:{webpack:function(){return[15387]}}}),P=(0,d.forwardRef)(function(n,o){var t=n.commentScene,e=n.onCreateCommentScene,i=n.onUpdateCommentScene,a=n.onDeleteCommentScene,c=(0,l._)((0,d.useState)(!1),2),u=c[0],s=c[1],v=(0,l._)((0,j.yG)("krpanoRef"),1)[0],p=(0,l._)((0,j.yG)("commentSceneSelected"),2),f=p[0],m=p[1],h=(0,l._)((0,j.yG)("loading"),1)[0];(0,d.useEffect)(function(){return function(){s(!1)}},[]),(0,d.useEffect)(function(){f?s(f.id===t.id):s(!1)},[f]);var g=(0,d.useCallback)(function(){m(null)},[m]),b=(0,d.useCallback)(function(n){return e(n,v)},[v,e]),w=(0,d.useCallback)(function(n){return i(n,v)},[v,i]),_=(0,d.useCallback)(function(n){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a(n,v,o)},[v,a]);return(0,d.useImperativeHandle)(o,function(){return{onClose:function(){s(!1),g()}}}),(0,r.jsx)(A.Z,{open:u,content:(0,r.jsx)(O.default,{loading:h,children:(0,r.jsx)(M,{onClose:g,commentSceneSelected:t,onCreateCommentScene:b,onUpdateCommentScene:w,onDeleteCommentScene:_})}),placement:"bottomLeft",destroyTooltipOnHide:!0,trigger:"click",zIndex:99,children:(0,r.jsxs)(L.TM,{className:t.isResolved?"resolved":"",children:[(0,r.jsx)(T,{src:"".concat("/static","/core/comment.svg"),name:"4"}),(0,r.jsx)("span",{className:"--icon",children:(null==t?void 0:t.index)||0})]})})}),E=t(19113),z=c()(function(){return t.e(4990).then(t.bind(t,74990))},{loadableGenerated:{webpack:function(){return[74990]}}}),I=(0,d.forwardRef)(function(n,o){var t,e,i,a,c,u,s,v,p,f,m,h,g,b,w,_,y=n.hotspot,x=n.listPost,k=n.isSoundOn,C=n.onClickHotspot,j=(0,d.useRef)(null),S=(0,l._)((0,d.useState)(!1),2),A=S[0],O=S[1],L=(0,l._)((0,d.useState)(!1),2),M=L[0],T=L[1],P=(0,d.useMemo)(function(){var n,o,t,e;return(null==y?void 0:null===(o=y.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.type)==="media-image"?null==y?void 0:null===(e=y.config)||void 0===e?void 0:null===(t=e.media)||void 0===t?void 0:t.post_id:""},[y]),I=(0,d.useMemo)(function(){var n,o;return(null==y?void 0:null===(o=y.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.type)||"media-video"},[y]),F=(0,d.useMemo)(function(){var n,o,t,e;return(null==y?void 0:null===(o=y.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.type)==="media-video"&&((null==y?void 0:null===(e=y.config)||void 0===e?void 0:null===(t=e.media)||void 0===t?void 0:t.loop)||!1)},[y]),R=(0,d.useMemo)(function(){var n,o,t,e;return(null==y?void 0:null===(o=y.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.type)==="media-video"&&((null==y?void 0:null===(e=y.config)||void 0===e?void 0:null===(t=e.media)||void 0===t?void 0:t.autoPlay)||!1)},[y]),H=(0,d.useMemo)(function(){var n,o,t,e;return(null==y?void 0:null===(o=y.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.type)==="media-video"&&(null==y?void 0:null===(e=y.config)||void 0===e?void 0:null===(t=e.media)||void 0===t?void 0:t.volume)||0},[y]),N=(0,d.useMemo)(function(){var n,o;return null==y?void 0:null===(o=y.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.action},[y]),D=(0,d.useMemo)(function(){var n,o;return(null==y?void 0:null===(o=y.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.width)||"250px"},[y]),W=(0,d.useMemo)(function(){var n,o;return(null==y?void 0:null===(o=y.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.height)||"200px"},[y]),G=(0,d.useMemo)(function(){var n,o;return(null==y?void 0:null===(o=y.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.transform)||""},[y]),U=(0,d.useMemo)(function(){var n,o;return(null==y?void 0:null===(o=y.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.rotate)||0},[y]),Z=(0,d.useMemo)(function(){var n,o;return(null==y?void 0:null===(o=y.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.backgroundColor)||"#00000000"},[y]),V=(0,d.useMemo)(function(){var n,o;return(null==y?void 0:null===(o=y.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.opacity)||1},[y]),Y=(0,d.useMemo)(function(){var n,o;return(null==y?void 0:null===(o=y.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.displayType)||"none"},[y]),B=(0,d.useMemo)(function(){var n,o;return(null==y?void 0:null===(o=y.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.content)||""},[y]);(0,d.useEffect)(function(){if("media-video"===I&&j.current){if(R)try{j.current.muted=!0,j.current.autoplay=!0,O(!0)}catch(n){}else j.current.pause()}},[R,I]),(0,d.useEffect)(function(){"media-video"===I&&j.current&&(j.current.volume=k?H/100:0,j.current.muted=!k||0===H)},[H,k,I]);var K=(0,d.useCallback)(function(){return T(!0)},[]),J=(0,d.useCallback)(function(){return T(!1)},[]),X=(0,d.useCallback)(function(){switch(I){case"media-video":if("play/pause"===N){var n,o,t;O((null===(n=j.current)||void 0===n?void 0:n.paused)||!1),(null===(o=j.current)||void 0===o?void 0:o.paused)?j.current.play():null===(t=j.current)||void 0===t||t.pause()}else C({hotspot:y});break;case"media-image":"open-post"===N?K():C({hotspot:y})}},[N,y,C,K,I]);return(0,d.useImperativeHandle)(o,function(){return{onToggleMute:function(n){j.current&&(j.current.muted=n,j.current.volume=n?0:H/100)}}},[H]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(E.Og,{width:D,height:W,opacity:V,rotate:U,transform:G,displayType:Y,backgroundColor:Z,children:"media-video"===I?(0,r.jsxs)(r.Fragment,{children:[N&&(0,r.jsx)("i",{className:"fas fa-".concat("zoom"===N?"search-plus":"play/pause"===N?A?"pause":"play":""),onClick:X,onTouchStart:X}),(0,r.jsxs)("video",{ref:j,loop:F,autoPlay:!0,className:"target",playsInline:!0,muted:!0,preload:"metadata",children:[(null==y?void 0:null===(e=y.config)||void 0===e?void 0:null===(t=e.media)||void 0===t?void 0:t.type)==="media-video"&&(null==y?void 0:null===(c=y.config)||void 0===c?void 0:null===(a=c.media)||void 0===a?void 0:null===(i=a.mediaIOS)||void 0===i?void 0:i.src)&&(0,r.jsx)("source",{src:(null==y?void 0:null===(s=y.config)||void 0===s?void 0:null===(u=s.media)||void 0===u?void 0:u.type)==="media-video"?(null==y?void 0:null===(f=y.config)||void 0===f?void 0:null===(p=f.media)||void 0===p?void 0:null===(v=p.mediaIOS)||void 0===v?void 0:v.src)+"#t=0.001":"",type:'video/mp4; codecs="hvc1"'}),(0,r.jsx)("source",{src:(null==y?void 0:null===(g=y.config)||void 0===g?void 0:null===(h=g.media)||void 0===h?void 0:null===(m=h.media)||void 0===m?void 0:m.src)||"#t=0.001",type:"video/mp4"})]})]}):"media-image"===I?(0,r.jsxs)(r.Fragment,{children:[N&&(0,r.jsx)("i",{"aria-hidden":!0,className:"fas fa-".concat("zoom"===N?"search-plus":"open-post"===N?"info-circle":""),onClick:X,onTouchStart:X}),(0,r.jsx)("img",{src:null==y?void 0:null===(_=y.config)||void 0===_?void 0:null===(w=_.media)||void 0===w?void 0:null===(b=w.media)||void 0===b?void 0:b.src,className:"target",alt:""})]}):"media-text"===I?(0,r.jsx)("div",{className:"target",dangerouslySetInnerHTML:{__html:B||""},onClick:X,onTouchStart:X}):(0,r.jsx)("div",{})}),M&&P&&(0,r.jsx)(z,{idPost:P,listPost:x||[],visible:M,onCancel:J})]})}),F=t(79180),R=t(97616),useInternalFunction=function(n){var o=n.scene,t=n.krpanoId,e=window,i=(0,l._)((0,j.FN)("zoom"),2)[1],r=(0,l._)((0,j.EB)("hlookat"),2)[1],a=(0,l._)((0,j.Oj)("vlookat"),2)[1],c=(0,d.useMemo)(function(){return(((null==o?void 0:o.mode)==="staging"?null==o?void 0:o.staging:(null==o?void 0:o.mode)==="day2dust"?null==o?void 0:o.day2dust:[])||[]).map(function(n){var o,t,e,i;return(0,m._)((0,f._)({},n),{xml:(null==n?void 0:null===(o=n.media)||void 0===o?void 0:o.krpano_xml)||"",urlTour:(null==n?void 0:null===(t=n.media)||void 0===t?void 0:t.src_preview)||(null==n?void 0:null===(e=n.media)||void 0===e?void 0:e.src_thumb)||(null==n?void 0:null===(i=n.media)||void 0===i?void 0:i.src)})})},[o]),u=(0,d.useCallback)(function(){e[t].call("mod(cur_hlookat,".concat(e[t].get("view.hlookat"),",360)")),e[t].call("mod(cur_Vlookat,".concat(e[t].get("view.vlookat"),",360)")),r(+e[t].get("cur_hlookat")),a(+e[t].get("cur_Vlookat")),e[t].call("update_hotspot_visiblity()")},[e,t,r,a]),s=(0,d.useCallback)(function(){i(+e[t].get("view.fov"))},[e,t,i]),v=(0,d.useCallback)(function(n){var l,c,d,u,s,v,p,f,m,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"drag";(null==o?void 0:o.media.subType)!=="flat"&&e[t].set("view.limitview","range"),r(null!==(p=null==o?void 0:null===(c=o.config)||void 0===c?void 0:null===(l=c.default_view)||void 0===l?void 0:l.x)&&void 0!==p?p:e[t].get("view.hlookat")),a(null!==(f=null==o?void 0:null===(u=o.config)||void 0===u?void 0:null===(d=u.default_view)||void 0===d?void 0:d.y)&&void 0!==f?f:e[t].get("view.vlookat")),i(null!==(m=null==o?void 0:null===(v=o.config)||void 0===v?void 0:null===(s=v.default_view)||void 0===s?void 0:s.zoom_lv)&&void 0!==m?m:e[t].get("view.fov")),e[t].set("showerrors",!1),e[t].set("logkey",!1),e[t].set("debugmode",!1),n?e[t].call("followmouse_disable()"):e[t].call("followmouse_enable()"),h&&"drag"!==h&&e[t].set("control.mode",h)},[o,e,t,i,r,a]),p=(0,d.useCallback)(function(){Object.entries(R.$i).forEach(function(n){var i=(0,l._)(n,2),r=i[0];Object.entries(i[1]).forEach(function(n){var i=(0,l._)(n,2),a=i[0],c=i[1],d=o&&(null==o?void 0:o.configPlugin)&&(null==o?void 0:o.configPlugin[r])&&(null==o?void 0:o.configPlugin[r][a])?null==o?void 0:o.configPlugin[r][a]:c;e[t].set("plugin[".concat(r,"].").concat(a),d)})})},[e,t,o]),h=(0,d.useCallback)(function(){var n,t,e,i,l,r,a,c,d,u,s,v,p,f,m,h,g,b,w,_,y,x,k,C,j,S,A,O,L,M,T,P,E,z,I,F,H,N,D,W,G,U,Z,V,Y,B,K,J,X,q,$,Q,nn,no,nt,ne,ni,nl,nr,na,nc,nd,nu,ns,nv,np,nf,nm,nh,ng,nb,nw,n_,ny,nx,nk,nC=arguments.length>0&&void 0!==arguments[0]&&arguments[0],nj=(null==o?void 0:null===(n=o.config)||void 0===n?void 0:n.typeTransition)==="3d"?"OPENBLEND(0.5, 0.0, 0.75, 0.05, linear)":null==o?void 0:null===(t=o.config)||void 0===t?void 0:t.typeTransition,nS="",nA=(null==o?void 0:null===(e=o.config)||void 0===e?void 0:e.isLittlePlanet)?170:null!==(a=null==o?void 0:null===(l=o.config)||void 0===l?void 0:null===(i=l.default_view)||void 0===i?void 0:i.zoom_lv)&&void 0!==a?a:nC?170:90;return(null==o?void 0:null===(r=o.media)||void 0===r?void 0:r.subType)!=="flat"&&(nS+="<view ",nC||(null==o?void 0:null===(c=o.config)||void 0===c?void 0:c.isLittlePlanet)?nS+="fov='".concat(!nC&&(null==o?void 0:null===(E=o.config)||void 0===E?void 0:E.isLittlePlanet)?170:nA,"' fovmin='1' fovmax='179' hlookatmin='-180' hlookatmax='180' vlookatmin='-90' vlookatmax='90' vlookat='").concat(!nC&&(null==o?void 0:null===(z=o.config)||void 0===z?void 0:z.isLittlePlanet)?90:null!==(W=null==o?void 0:null===(F=o.config)||void 0===F?void 0:null===(I=F.default_view)||void 0===I?void 0:I.y)&&void 0!==W?W:90,"' hlookat='").concat(!nC&&(null==o?void 0:null===(H=o.config)||void 0===H?void 0:H.isLittlePlanet)?-60:null!==(G=null==o?void 0:null===(D=o.config)||void 0===D?void 0:null===(N=D.default_view)||void 0===N?void 0:N.x)&&void 0!==G?G:-60,"' stereographic='true' fisheye='1.0' fovtype='VFOV' limitview='lookat' /> <display flash10='off' detail='24' />"):((null==o?void 0:null===(Z=o.config)||void 0===Z?void 0:null===(U=Z.default_view)||void 0===U?void 0:U.x)!==void 0&&(nS+=' hlookat="'.concat(null==o?void 0:null===(Y=o.config)||void 0===Y?void 0:null===(V=Y.default_view)||void 0===V?void 0:V.x,'"')),(null==o?void 0:null===(K=o.config)||void 0===K?void 0:null===(B=K.default_view)||void 0===B?void 0:B.y)!==void 0&&(nS+=' vlookat="'.concat(null==o?void 0:null===(X=o.config)||void 0===X?void 0:null===(J=X.default_view)||void 0===J?void 0:J.y,'"')),(null==o?void 0:null===($=o.config)||void 0===$?void 0:null===(q=$.default_view)||void 0===q?void 0:q.zoom_lv)!==void 0&&(nS+=' fov="'.concat((null==o?void 0:null===(Q=o.config)||void 0===Q?void 0:Q.typeTransition)==="3d"?nA+30:nA,'"')),nS+=' fovmin="'.concat(null!==(nv=null==o?void 0:null===(no=o.config)||void 0===no?void 0:null===(nn=no.zoom_limit)||void 0===nn?void 0:nn.min)&&void 0!==nv?nv:60,'"')+' fovmax="\n                '.concat(null!==(np=null==o?void 0:null===(ne=o.config)||void 0===ne?void 0:null===(nt=ne.zoom_limit)||void 0===nt?void 0:nt.max)&&void 0!==np?np:150,'"')+' limitview="range"'+' hlookatmin="'.concat(null!==(nf=null==o?void 0:null===(nl=o.config)||void 0===nl?void 0:null===(ni=nl.limit_view)||void 0===ni?void 0:ni.left)&&void 0!==nf?nf:-180,'"')+' hlookatmax="'.concat(null!==(nm=null==o?void 0:null===(na=o.config)||void 0===na?void 0:null===(nr=na.limit_view)||void 0===nr?void 0:nr.right)&&void 0!==nm?nm:180,'"')+' vlookatmin="'.concat(null!==(nh=null==o?void 0:null===(nd=o.config)||void 0===nd?void 0:null===(nc=nd.limit_view)||void 0===nc?void 0:nc.bottom)&&void 0!==nh?nh:90,'"')+' vlookatmax="'.concat(null!==(ng=null==o?void 0:null===(ns=o.config)||void 0===ns?void 0:null===(nu=ns.limit_view)||void 0===nu?void 0:nu.top)&&void 0!==ng?ng:-90,'"')+" />"),nS+="".concat((null==o?void 0:null===(u=o.configPlugin)||void 0===u?void 0:null===(d=u.lensflare)||void 0===d?void 0:d.enabled)&&(null==o?void 0:null===(v=o.configPlugin)||void 0===v?void 0:null===(s=v.lensflare)||void 0===s?void 0:s.ath)&&(null==o?void 0:null===(f=o.configPlugin)||void 0===f?void 0:null===(p=f.lensflare)||void 0===p?void 0:p.atv)?'<include url="%$mypath%/core/skin/lensflare.xml" /> <lensflare_settings editor="false" ath="'.concat(null!==(nb=null==o?void 0:null===(h=o.configPlugin)||void 0===h?void 0:null===(m=h.lensflare)||void 0===m?void 0:m.ath)&&void 0!==nb?nb:null===(g=R.$i.lensflare)||void 0===g?void 0:g.ath,'" atv="').concat(null!==(nw=null==o?void 0:null===(w=o.configPlugin)||void 0===w?void 0:null===(b=w.lensflare)||void 0===b?void 0:b.atv)&&void 0!==nw?nw:null===(_=R.$i.lensflare)||void 0===_?void 0:_.atv,'" sun="').concat(null!==(n_=null==o?void 0:null===(x=o.configPlugin)||void 0===x?void 0:null===(y=x.lensflare)||void 0===y?void 0:y.sun)&&void 0!==n_?n_:null===(k=R.$i.lensflare)||void 0===k?void 0:k.sun,'" glare="').concat(null!==(ny=null==o?void 0:null===(j=o.configPlugin)||void 0===j?void 0:null===(C=j.lensflare)||void 0===C?void 0:C.glare)&&void 0!==ny?ny:null===(S=R.$i.lensflare)||void 0===S?void 0:S.glare,'" r_ring="').concat(null!==(nx=null==o?void 0:null===(O=o.configPlugin)||void 0===O?void 0:null===(A=O.lensflare)||void 0===A?void 0:A.r_ring)&&void 0!==nx?nx:null===(L=R.$i.lensflare)||void 0===L?void 0:L.r_ring,'" exposure="true" exposure_bias="').concat(null!==(nk=null==o?void 0:null===(T=o.configPlugin)||void 0===T?void 0:null===(M=T.lensflare)||void 0===M?void 0:M.exposure_bias)&&void 0!==nk?nk:null===(P=R.$i.lensflare)||void 0===P?void 0:P.exposure_bias,'"/>\n                  <plugin name="pp_light" devices="html5" keep="false" url="%$mypath%/core/plugins/pp_light.js" enabled="true" exposure="0.0" lights="0.0" shadows="0.0" filterrange="60.0" masking="1.0" quality="7" order="" phase="2" />'):"")),{view:nS,transition:nj,fovDefault:nA}},[o]),g=(0,d.useCallback)(function(n,o){if(e[t]&&o){var i="hotspot-".concat(n.id,"-").concat(t,"-type").concat(n.type,"-").concat(n.polygon?"ispolygon":"unpolygon");if("sound"===n.type){var l,r,a,c,d,u,s,v,p,f,m,h,g,b,w,_="sound1click(".concat(i,", ").concat((null==n?void 0:null===(a=n.config)||void 0===a?void 0:null===(r=a.sound)||void 0===r?void 0:null===(l=r.file)||void 0===l?void 0:l.src)||(null==n?void 0:null===(d=n.config)||void 0===d?void 0:null===(c=d.sound)||void 0===c?void 0:c.url),", ").concat((null==n?void 0:null===(s=n.config)||void 0===s?void 0:null===(u=s.sound)||void 0===u?void 0:u.action)||"pause",", ").concat((null===(p=n.config)||void 0===p?void 0:null===(v=p.sound)||void 0===v?void 0:v.volume)?(n.config.sound.volume/100).toFixed(1):.4,", ").concat((null==n?void 0:null===(m=n.config)||void 0===m?void 0:null===(f=m.sound)||void 0===f?void 0:f.reach)?n.config.sound.reach.toFixed(1):240,", ").concat((null==n?void 0:null===(g=n.config)||void 0===g?void 0:null===(h=g.sound)||void 0===h?void 0:h.auto_play)||!1,", ").concat((null==n?void 0:null===(w=n.config)||void 0===w?void 0:null===(b=w.sound)||void 0===b?void 0:b.loop)||!1,")");e[t].call(_)}else"instructor"===n.type&&(e[t].call("hotspot[".concat(i,"].togglepause()")),e[t].set("hotspot['".concat(i,"'].muted"),!o))}},[e,t]),b=(0,d.useCallback)(function(n){var o=e[t],i="nadirlogo";o.set("hotspot['".concat(i,"'].ath"),0),o.set("hotspot['".concat(i,"'].atv"),90),o.set("hotspot['".concat(i,"'].zoom"),!1),o.set("hotspot['".concat(i,"'].rotate"),0),o.set("hotspot['".concat(i,"'].scale"),(null==n?void 0:n.scale)||1),o.set("hotspot['".concat(i,"'].rotatewithview"),"true"),o.set("hotspot['".concat(i,"'].distorted"),!0),o.set("hotspot['".concat(i,"'].url"),(null==n?void 0:n.src)||""),o.set("hotspot['".concat(i,"'].visible"),!!((null==n?void 0:n.isEnabled)&&(null==n?void 0:n.src))),(null==n?void 0:n.link)&&o.set("hotspot['".concat(i,"'].onclick"),function(){window.open(null==n?void 0:n.link,"_blank")}),(null==n?void 0:n.isEnabled)&&(null==n?void 0:n.src)&&o.call("addhotspot('".concat(i,"')"))},[e,t]),w=(0,d.useCallback)(function(){setTimeout(function(){var n,i,l,r,a,c,d,u;e[t].call("normalview(".concat((null==o?void 0:null===(i=o.config)||void 0===i?void 0:null===(n=i.default_view)||void 0===n?void 0:n.x)||0,", ").concat((null==o?void 0:null===(r=o.config)||void 0===r?void 0:null===(l=r.default_view)||void 0===l?void 0:l.y)||0,", ").concat((null==o?void 0:null===(c=o.config)||void 0===c?void 0:null===(a=c.default_view)||void 0===a?void 0:a.zoom_lv)||90,", ").concat(null==o?void 0:null===(d=o.config)||void 0===d?void 0:d.timeTransitionLittlePlanet,")")),setTimeout(function(){var n,i,l,r,a,c,d,u,s,v,p,f,m,h,g,b,w,_;e[t].set("view.fovmin",null!==(m=null==o?void 0:null===(i=o.config)||void 0===i?void 0:null===(n=i.zoom_limit)||void 0===n?void 0:n.min)&&void 0!==m?m:60),e[t].set("view.fovmax",null!==(h=null==o?void 0:null===(r=o.config)||void 0===r?void 0:null===(l=r.zoom_limit)||void 0===l?void 0:l.max)&&void 0!==h?h:150),e[t].set("view.hlookatmin",null!==(g=null==o?void 0:null===(c=o.config)||void 0===c?void 0:null===(a=c.limit_view)||void 0===a?void 0:a.left)&&void 0!==g?g:-180),e[t].set("view.hlookatmax",null!==(b=null==o?void 0:null===(u=o.config)||void 0===u?void 0:null===(d=u.limit_view)||void 0===d?void 0:d.right)&&void 0!==b?b:180),e[t].set("view.vlookatmin",null!==(w=null==o?void 0:null===(v=o.config)||void 0===v?void 0:null===(s=v.limit_view)||void 0===s?void 0:s.bottom)&&void 0!==w?w:90),e[t].set("view.vlookatmax",null!==(_=null==o?void 0:null===(f=o.config)||void 0===f?void 0:null===(p=f.limit_view)||void 0===p?void 0:p.top)&&void 0!==_?_:-90),e[t].call("tween(view.tx|view.ty|view.tz|view.ox|view.oy|view.oz|view.fisheye, calc(''+image.ox+'|'+image.oy+'|'+image.oz+'|0|0|0|0'), 0.1, default)")},1e3*((null==o?void 0:null===(u=o.config)||void 0===u?void 0:u.timeTransitionLittlePlanet)||2)+100)},200)},[e,t,o]),_=(0,d.useCallback)(function(n){var o,i,l,r,a,c,d,u,s,v,p,f,m=e[t],h="hotspot-".concat(n.id,"-").concat(t,"-type").concat(n.type,"-").concat(n.polygon?"ispolygon":"unpolygon","-vrmode");m.set("hotspot['".concat(h,"'].name"),h),m.set("hotspot['".concat(h,"'].url"),(null==n?void 0:null===(i=n.config)||void 0===i?void 0:null===(o=i.style)||void 0===o?void 0:o.type)==="image"&&(null==n?void 0:null===(a=n.config)||void 0===a?void 0:null===(r=a.style)||void 0===r?void 0:null===(l=r.image)||void 0===l?void 0:l.src)?null==n?void 0:null===(u=n.config)||void 0===u?void 0:null===(d=u.style)||void 0===d?void 0:null===(c=d.image)||void 0===c?void 0:c.src:"point"===n.type?"".concat("/static","/static/point.png"):"image"===n.type?"".concat("/static","/static/image.png"):"sound"===n.type?"".concat("/static","/static/sound.png"):"".concat("/static","/static/video.png")),m.set("hotspot['".concat(h,"'].renderer"),"webgl"),m.set("hotspot['".concat(h,"'].width"),"32"),m.set("hotspot['".concat(h,"'].height"),"32"),m.set("hotspot['".concat(h,"'].imagewidth"),"24"),m.set("hotspot['".concat(h,"'].imageheight"),"24"),m.set("hotspot['".concat(h,"'].depth"),"1000"),m.set("hotspot['".concat(h,"'].scale"),1),m.set("hotspot['".concat(h,"'].ath"),+n.ath),m.set("hotspot['".concat(h,"'].atv"),+n.atv),m.set("hotspot['".concat(h,"'].onover"),"tween(scale,1.5,easeOutExpo,0.2);"),m.set("hotspot['".concat(h,"'].onout"),"tween(scale,1,easeOutExpo,0.2);"),m.set("hotspot['".concat(h,"'].visible"),null!==(s=m.get("webvr.isenabled"))&&void 0!==s&&s),m.set("hotspot['".concat(h,"'].enabled"),null!==(v=m.get("webvr.isenabled"))&&void 0!==v&&v),m.set("hotspot['".concat(h,"'].align"),"center"),m.set("hotspot['".concat(h,"'].zoom"),!0);var g="hotspot-".concat(n.id,"-").concat(t,"-type").concat(n.type,"-").concat(n.polygon?"ispolygon":"unpolygon","-title-vrmode");return m.set("hotspot['".concat(g,"'].type"),"text"),m.set("hotspot['".concat(g,"'].scale"),"0.1"),m.set("hotspot['".concat(g,"'].zoom"),!0),m.set("hotspot['".concat(g,"'].align"),"center"),m.set("hotspot['".concat(g,"'].css"),"font-size:12px;color:#ffffff"),m.set("hotspot['".concat(g,"'].html"),n.title),m.set("hotspot['".concat(g,"'].bg"),!0),m.set("hotspot['".concat(g,"'].bgcolor"),"#000000"),m.set("hotspot['".concat(g,"'].bgalpha"),"0.5"),m.set("hotspot['".concat(g,"'].ath"),n.ath),m.set("hotspot['".concat(g,"'].atv"),n.atv-3),m.set("hotspot['".concat(g,"'].visible"),null!==(p=m.get("webvr.isenabled"))&&void 0!==p&&p),m.set("hotspot['".concat(g,"'].enabled"),null!==(f=m.get("webvr.isenabled"))&&void 0!==f&&f),m.set("hotspot['".concat(g,"'].depth"),"100.0"),{krpano:m,name:h,nameTitle:g}},[e,t]),y=(0,d.useCallback)(function(n){var o,i,l,r,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=e[t],d="hotspot-".concat(n.id,"-").concat(t,"-type").concat(n.type,"-").concat(n.polygon?"ispolygon":"unpolygon");return c.set("hotspot['".concat(d,"'].styleType"),null===(i=n.config)||void 0===i?void 0:null===(o=i.style)||void 0===o?void 0:o.type),c.set("hotspot['".concat(d,"'].name"),d),c.set("hotspot['".concat(d,"'].zoom"),!!a),c.set("hotspot['".concat(d,"'].capture"),"true"),c.set("hotspot['".concat(d,"'].visible"),"chevron"===n.type||(l=!c.get("webvr.isenabled"),!1)||l),c.set("hotspot['".concat(d,"'].enabled"),"chevron"===n.type||(r=!c.get("webvr.isenabled"),!1)||r),c.set("hotspot['".concat(d,"'].onover"),function(){c.set("hotspot['".concat(d,"'].zorder"),4003)}),c.set("hotspot['".concat(d,"'].onout"),function(){c.set("hotspot['".concat(d,"'].zorder"),4002)}),{name:d,krpano:c,onConfigHotspotMedia:function(){c.set("hotspot['".concat(d,"'].distorted"),"true"),c.set("hotspot['".concat(d,"'].rx"),"0"),c.set("hotspot['".concat(d,"'].ry"),"0"),c.set("hotspot['".concat(d,"'].rz"),"0"),c.set("hotspot['".concat(d,"'].cursor"),"unset"),c.set("hotspot['".concat(d,"'].capture"),!1),c.set("hotspot['".concat(d,"'].usecontentsize"),"true")},onConfigHotspotPolygon:function(o){c.set("hotspot['".concat(d,"'].renderer"),"webgl");var t,e,i,l,r,a,u=n.polygon_config,s=(0,x.JF)((null==u?void 0:null===(t=u.properties)||void 0===t?void 0:t.fillColor)||(null==o?void 0:o.fillColor)||R.qi.fillColor),v=(0,x.JF)((null==u?void 0:null===(e=u.properties)||void 0===e?void 0:e.fillColorHover)||(null==o?void 0:o.fillColorHover)||R.qi.fillColorHover),p=(0,x.JF)((null==u?void 0:null===(i=u.properties)||void 0===i?void 0:i.borderColor)||(null==o?void 0:o.borderColor)||R.qi.borderColor),f=(0,x.JF)((null==u?void 0:null===(l=u.properties)||void 0===l?void 0:l.borderColorHover)||(null==o?void 0:o.borderColorHover)||R.qi.borderColorHover);if(c.set("hotspot[".concat(d,"].fillcolor"),s.color.replace("#","0x")),c.set("hotspot[".concat(d,"].bordercolor"),p.color.replace("#","0x")),c.set("hotspot[".concat(d,"].borderwidth"),(null==u?void 0:null===(r=u.properties)||void 0===r?void 0:r.borderWidth)||(null==o?void 0:o.borderWidth)||3),c.set("hotspot[".concat(d,"].fillalpha"),s.alpha),c.set("hotspot[".concat(d,"].borderalpha"),p.alpha),c.set("hotspot[".concat(d,"].tooltip"),n.title),c.set("hotspot[".concat(d,"].zorder"),1),c.set("hotspot[".concat(d,"].onhover"),function(){c.call("tween(hotspot[".concat(d,"].fillcolor, ").concat(v.color.replace("#","0x"),", 0.2);\n              tween(hotspot[").concat(d,"].fillalpha, ").concat(v.alpha,", 0.2);")),c.call("tween(hotspot[".concat(d,"].bordercolor, ").concat(f.color.replace("#","0x"),", 0.2);\n              tween(hotspot[").concat(d,"].borderalpha, ").concat(f.alpha,", 0.2);"))}),c.set("hotspot[".concat(d,"].onout"),function(){c.call("tween(hotspot[".concat(d,"].fillcolor, ").concat(s.color.replace("#","0x"),", 0.2);\n              tween(hotspot[").concat(d,"].fillalpha, ").concat(s.alpha,", 0.2);")),c.call("tween(hotspot[".concat(d,"].bordercolor, ").concat(p.color.replace("#","0x"),", 0.2);\n              tween(hotspot[").concat(d,"].borderalpha, ").concat(p.alpha,", 0.2);")),c.call("copy(layer[tooltip].html, );tween(layer[tooltip].alpha, 0.0, 0.25, default, set(layer[tooltip].visible,false), copy(layer[tooltip].x,mouse.stagex); copy(layer[tooltip].y,mouse.stagey); );")}),c.call("hotspot[".concat(d,"].loadstyle(poly_hotspot_text)")),null==u?void 0:null===(a=u.points)||void 0===a?void 0:a.length)for(var m=0;m<(null==u?void 0:u.points.length);m+=1){var h=null==u?void 0:u.points[m];c.set("hotspot[".concat(d,"].point[").concat(m,"].ath"),h.ath),c.set("hotspot[".concat(d,"].point[").concat(m,"].atv"),h.atv)}},onConfigHotspotInstructor:function(o){c.set("hotspot['".concat(d,"'].url"),"%$mypath%/core/plugins/videoplayer.js"),c.set("hotspot['".concat(d,"'].videourl"),null===(i=n.config)||void 0===i?void 0:null===(e=i.instructor)||void 0===e?void 0:null===(t=e.media)||void 0===t?void 0:t.src),c.set("hotspot['".concat(d,"'].renderer"),"auto"),c.set("hotspot['".concat(d,"'].distorted"),!0),c.set("hotspot['".concat(d,"'].zoom"),!1),c.set("hotspot['".concat(d,"'].autoresume"),!0),c.set("hotspot['".concat(d,"'].muted"),!o),o?c.set("hotspot['".concat(d,"'].pausedonstart"),null!==(S=null===(r=n.config)||void 0===r?void 0:null===(l=r.instructor)||void 0===l?void 0:l.paused_on_start)&&void 0!==S?S:R.Cv.paused_on_start):c.set("hotspot['".concat(d,"'].pausedonstart"),!0),c.set("hotspot['".concat(d,"'].loop"),null!==(A=null===(u=n.config)||void 0===u?void 0:null===(a=u.instructor)||void 0===a?void 0:a.loop)&&void 0!==A?A:R.Cv.loop),c.set("hotspot['".concat(d,"'].directionalsound"),null!==(O=null===(v=n.config)||void 0===v?void 0:null===(s=v.instructor)||void 0===s?void 0:s.sound_360)&&void 0!==O?O:R.Cv.sound_360),c.set("hotspot['".concat(d,"'].volume"),null!==(L=null===(f=n.config)||void 0===f?void 0:null===(p=f.instructor)||void 0===p?void 0:p.volume)&&void 0!==L?L:R.Cv.volume);var t,e,i,l,r,a,u,s,v,p,f,m,h,g,b,w,_,y,k,C,j,S,A,O,L,M,T,P,E,z,I=(0,x.JF)(null!==(M=null===(h=n.config)||void 0===h?void 0:null===(m=h.instructor)||void 0===m?void 0:m.mask)&&void 0!==M?M:R.Cv.mask);c.set("hotspot[".concat(d,"].chromakey"),"".concat(I.color.replace("#","0x"),"|").concat(null!==(T=null===(b=n.config)||void 0===b?void 0:null===(g=b.instructor)||void 0===g?void 0:g.smoothing)&&void 0!==T?T:R.Cv.smoothing,"|").concat(null!==(P=null===(_=n.config)||void 0===_?void 0:null===(w=_.instructor)||void 0===w?void 0:w.threshold)&&void 0!==P?P:R.Cv.threshold));var F=null!==(E=null===(k=n.config)||void 0===k?void 0:null===(y=k.instructor)||void 0===y?void 0:y.width)&&void 0!==E?E:R.Cv.width;c.set("hotspot['".concat(d,"'].width"),F);var H=null!==(z=null===(j=n.config)||void 0===j?void 0:null===(C=j.instructor)||void 0===C?void 0:C.height)&&void 0!==z?z:R.Cv.height;c.set("hotspot['".concat(d,"'].height"),H)}}},[t,e]),k=(0,d.useCallback)(function(n){var i,l,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e[t],c="commentscene-".concat(null==n?void 0:n.id,"-").concat(t).concat(r?"-temporary":"");return a.set("hotspot['".concat(c,"'].name"),c),(null==o?void 0:o.media.subType)!=="flat"&&(a.set("hotspot['".concat(c,"'].capture"),!1),a.set("hotspot['".concat(c,"'].zoom"),!0)),a.set("hotspot['".concat(c,"'].onover"),function(){a.set("hotspot['".concat(c,"'].zorder"),4003)}),a.set("hotspot['".concat(c,"'].onout"),function(){a.set("hotspot['".concat(c,"'].zorder"),4002)}),a.set("hotspot['".concat(c,"'].ath"),+(null!==(i=null==n?void 0:n.ath)&&void 0!==i?i:0)),a.set("hotspot['".concat(c,"'].atv"),+(null!==(l=null==n?void 0:n.atv)&&void 0!==l?l:0)),a.set("hotspot['".concat(c,"'].url"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAAtJREFUCB1jYAACAAAFAAGNu5vzAAAAAElFTkSuQmCC"),a.set("hotspot['".concat(c,"'].renderer"),"css3d"),{krpano:a,name:c}},[e,o,t]);return(0,d.useMemo)(function(){return{sceneChilds:c,onRenderXmlKrpano:h,onTriggerChangeView:u,onTriggerChangeZoom:s,onTriggerSoundHotspot:g,onTriggerLoadCompleted:v,onAddHotspotNadirKrpano:b,onAddHotspotKrpanoUtils:y,onAddHotspotVRKrpanoUtils:_,onAddCommentSceneIconUtils:k,onBackNormalViewFromLittlePlanetView:w,onApplyConfigPluginKrpanoForScene:p}},[c,h,u,s,g,v,b,y,_,k,w,p])},H=void 0,N=c()(function(){return t.e(6295).then(t.bind(t,6295))},{loadableGenerated:{webpack:function(){return[6295]}}}),D=c()(function(){return t.e(308).then(t.bind(t,80308))},{loadableGenerated:{webpack:function(){return[80308]}}}),W=x.sk?void 0:window,G=(0,d.forwardRef)(function(n,o){var t,e,i,a=n.scene,c=n.listScene,v=void 0===c?[]:c,p=n.urlTour,h=n.divId,g=void 0===h?"container":h,b=n.krpanoId,w=void 0===b?"krpanoContainer":b,A=n.dollhouseXml,O=void 0===A?"":A,L=n.onClickHotspot,M=n.onChangeAutoChangeScene,T=n.isLoaded,E=n.setIsLoaded,z=n.nadirConfig,G=n.children,U=n.styleContainer,Z=void 0===U?{height:"100%"}:U,V=n.isTurnOffFollowMode,Y=void 0!==V&&V,B=n.onChangeScene,K=(0,d.useRef)(!1),J=(0,d.useRef)(!1),X=(0,d.useRef)(null),q=(0,d.useRef)(new Map([])),$=(0,d.useRef)(new Map([])),Q=(0,d.useRef)(new Map([])),nn=(0,u.v9)(s.ac),no=(0,u.v9)(s.CO),nt=(0,u.v9)(s.Yd),ne=(0,u.v9)(s.g5),ni=(0,u.v9)(s.FT),nl=(0,u.v9)(s.lT),nr=(0,u.v9)(s.p8),na=(0,u.v9)(s.iD),nc=(0,u.v9)(s.x8),nd=(0,u.v9)(s.h6),nu=(0,l._)((0,d.useState)(),2),ns=nu[0],nv=nu[1],np=(0,l._)((0,d.useState)(!1),2),nf=np[0],nm=np[1],nh=(0,S.d)(),ng=nh.onCreateCommentScene,nb=nh.onUpdateCommentScene,nw=nh.onDeleteCommentScene,n_=(0,l._)((0,j.yG)("isShowDialogCreateCommentScene"),2)[1],ny=(0,l._)((0,j.yG)("commentSceneTemporary"),2)[1],nx=(0,l._)((0,j.yG)("commentSceneSelected"),2)[1],nk=useInternalFunction({scene:a,krpanoId:w}),nC=nk.sceneChilds,nj=nk.onRenderXmlKrpano,nS=nk.onTriggerChangeView,nA=nk.onTriggerChangeZoom,nO=nk.onTriggerSoundHotspot,nL=nk.onTriggerLoadCompleted,nM=nk.onAddHotspotNadirKrpano,nT=nk.onAddHotspotKrpanoUtils,nP=nk.onAddHotspotVRKrpanoUtils,nE=nk.onAddCommentSceneIconUtils,nz=nk.onApplyConfigPluginKrpanoForScene,nI=nk.onBackNormalViewFromLittlePlanetView;(0,d.useEffect)(function(){J.current=nf},[nf]);var nF=(0,d.useCallback)(function(n){if(n&&n.media&&ns){var o=nj((null==nc?void 0:nc.mode)==="little_planet"),t=o.transition,e=o.view,i=o.fovDefault,l=(0,x.JF)((null==nl?void 0:nl.bgColor)||R.Vb);W[w].set("dollhouse_bg_color",l.color.replace("#","0x")),no&&(null==nl?void 0:nl.isShowOnStart)&&W[w].call("hideHTML()"),ns.loadScene(p,null,n.media.krpano_xml||null,t,e,n.mode||"",nC,n.configStaging||{},i,n.media.subType,O,no&&!!(null==nl?void 0:nl.isShowOnStart))}},[p,w,ns,nC,O,no,nj,null==nl?void 0:nl.bgColor,null==nc?void 0:nc.mode,null==nl?void 0:nl.isShowOnStart]),nR=(0,d.useCallback)((t=(0,_._)(function(n){var o,t,e,i,l;return(0,y.Jh)(this,function(r){return t=(o=nP(n)).krpano,e=o.name,i=o.nameTitle,l=function(){var o,i,l,r;"point"===n.type?L({hotspot:n}):"sound"===n.type?nO(n,J.current):"image"===n.type?t.call('open_galleries("'.concat(e,'", "').concat(((null===(i=n.config)||void 0===i?void 0:null===(o=i.image)||void 0===o?void 0:o.galleries)||[]).map(function(n){return n.src}).join(","),'")')):"video"===n.type&&t.call('open_video("'.concat(e,'", "').concat(null==n?void 0:null===(r=n.config)||void 0===r?void 0:null===(l=r.video)||void 0===l?void 0:l.url,'")'))},t.set("hotspot['".concat(e,"'].onclick"),l),t.set("hotspot['".concat(i,"'].onclick"),l),t.call("addhotspot('".concat(i,"')")),t.call("addhotspot('".concat(e,"')")),[2,new Promise(function(n){return n(!0)})]})}),function(n){return t.apply(this,arguments)}),[nP,L,nO]),nH=(0,d.useCallback)((e=(0,_._)(function(n){var o,t,e,i,l,c,d,u,s,p,h=arguments;function renderHotspot(){return _renderHotspot.apply(this,arguments)}function _renderHotspot(){return(_renderHotspot=(0,_._)(function(){var o,t,l,a,c,d,u;return(0,y.Jh)(this,function(s){return l=i.get("hotspot[".concat(e,"]")),a=(0,r.jsx)("div",{id:e,className:"inline-flex ".concat((null==ni?void 0:ni.lockHotspot)&&("media"!==n.type||(null===(t=n.config)||void 0===t?void 0:null===(o=t.media)||void 0===o?void 0:o.type)!=="media-image")?"absolute-center":"")}),l.sprite.innerHTML=(0,k.Dq)(a).toString(),(c=document.getElementById(e))&&(0,C.createRoot)(c).render("media"===n.type?(0,r.jsx)(I,{ref:function(o){var t,e;o&&(null===(e=n.config)||void 0===e?void 0:null===(t=e.media)||void 0===t?void 0:t.type)==="media-video"&&!Q.current.get(n.id)&&Q.current.set(n.id,o)},onClickHotspot:L,isSoundOn:J.current,hotspot:n,listPost:nt}):"compact"===n.type?(0,r.jsx)(D,{hotspot:n,listScene:v,languageSelected:ne,onClick:function(o){var t=o.type,e=o.config,i=(0,m._)((0,f._)({},n),{config:(0,f._)({},n.config)});t&&(i.type=t),e&&(i.config[t]=e),L({hotspot:i})}}):(0,r.jsx)(N,{onClick:function(){var o,t,l,r,a;(null===(o=n.config)||void 0===o?void 0:o.sound)!==void 0?nO(n,J.current):"point"===n.type&&(null===(l=n.config)||void 0===l?void 0:null===(t=l.point)||void 0===t?void 0:t.isTransition)&&(null===(a=n.config)||void 0===a?void 0:null===(r=a.point)||void 0===r?void 0:r.typeTransition)==="3d"?(i.call("transition_click(".concat(e,")")),setTimeout(function(){L({hotspot:n})},100)):L({hotspot:n})},isHidden:"sound"===n.type&&!(null===(u=n.config)||void 0===u?void 0:null===(d=u.sound)||void 0===d?void 0:d.action),isHideTitleGlobal:!!(null==ni?void 0:ni.hideTitle),isHidePreviewGlobal:!!(null==ni?void 0:ni.hidePreview),isHideTitleOnTopGlobal:!!(null==ni?void 0:ni.hideTitleOnTopHotspot),bgColorDefault:null==ni?void 0:ni.bgColor,iconColorDefault:null==ni?void 0:ni.iconColor,hotspot:n,listScene:v,listPost:nt,onChangePopover:function(n){return M(!n)}})),[2]})})).apply(this,arguments)}return(0,y.Jh)(this,function(r){switch(r.label){case 0:if(o=h.length>1&&void 0!==h[1]&&h[1],e=(t=nT(n,(null==a?void 0:a.media.subType)==="flat"||!!(null==ni?void 0:ni.keepHotspotPositionWhenZooming))).name,i=t.krpano,l=t.onConfigHotspotMedia,c=t.onConfigHotspotPolygon,d=t.onConfigHotspotInstructor,(null==a?void 0:a.media.subType)==="flat"&&i.set("hotspot['".concat(e,"'].scale"),.01),!(n.polygon&&n.polygon_config))return[3,1];return c(nr),i.set("hotspot['".concat(e,"'].onclick"),function(){if(i.get("webvr.isenabled")){var o,t,l,r;"point"===n.type?L({hotspot:n}):"image"===n.type?i.call('open_galleries("'.concat(e,'", "').concat(((null===(t=n.config)||void 0===t?void 0:null===(o=t.image)||void 0===o?void 0:o.galleries)||[]).map(function(n){return n.src}),'")')):"video"===n.type&&i.call('open_video("'.concat(e,'", "').concat((null===(r=n.config)||void 0===r?void 0:null===(l=r.video)||void 0===l?void 0:l.url)||"",'")'))}else L({hotspot:n})}),[3,3];case 1:if(n.polygon)return[3,3];return i.set("hotspot['".concat(e,"'].ath"),+n.ath),i.set("hotspot['".concat(e,"'].atv"),+n.atv),i.set("hotspot['".concat(e,"'].renderer"),"css3d"),"chevron"===n.type&&(i.set("hotspot['".concat(e,"'].style"),"skin_hotspotstyle"),i.set("hotspot['".concat(e,"'].onclick"),function(){var o,t,l,r;(null===(t=n.config)||void 0===t?void 0:null===(o=t.chevron)||void 0===o?void 0:o.isTransition)&&(null===(r=n.config)||void 0===r?void 0:null===(l=r.chevron)||void 0===l?void 0:l.typeTransition)==="3d"?(i.call("transition_click(".concat(e,")")),setTimeout(function(){L({hotspot:n})},100)):L({hotspot:n})})),"media"===n.type&&l(),"instructor"===n.type&&(null===(p=n.config)||void 0===p?void 0:null===(s=p.instructor)||void 0===s?void 0:null===(u=s.media)||void 0===u?void 0:u.src)?(d(J.current),i.set("hotspot['".concat(e,"'].onclick"),function(){nO(n,J.current)})):(i.set("hotspot['".concat(e,"'].url"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAAtJREFUCB1jYAACAAAFAAGNu5vzAAAAAElFTkSuQmCC"),i.set("hotspot['".concat(e,"'].width"),1),i.set("hotspot['".concat(e,"'].height"),1),i.set("hotspot['".concat(e,"'].renderer"),"css3d")),[4,i.set("hotspot['".concat(e,"'].onloaded"),(0,_._)(function(){return(0,y.Jh)(this,function(o){return"chevron"!==n.type&&"instructor"!==n.type&&renderHotspot(),[2]})}))];case 2:r.sent(),r.label=3;case 3:return o?n.polygon||renderHotspot():i.call("addhotspot('".concat(e,"')")),[2,new Promise(function(n){return n(!0)})]}})}),function(n){return e.apply(this,arguments)}),[a,nt,v,L,ne,ni,nO,M,nT,nr]),nN=(0,d.useCallback)((i=(0,_._)(function(n,o,t){var e,i,l,a,c,d,u;return(0,y.Jh)(this,function(s){switch(s.label){case 0:if(e=n.get("hotspot[".concat(o,"]")),t.isOwnerTour&&n.set("hotspot['".concat(o,"'].onDragend"),function(){var e={ath:n.get("hotspot['".concat(o,"'].ath")),atv:n.get("hotspot['".concat(o,"'].atv"))};1e-4>Math.abs(Math.abs(t.ath)-Math.abs(e.ath))&&1e-4>Math.abs(Math.abs(t.atv)-Math.abs(e.atv))||nb((0,m._)((0,f._)({},t,e),{message:void 0,isResolved:void 0,scene_id:t.scene}))}),n.set("hotspot['".concat(o,"'].onclick"),function(){nx(t)}),!(i=document.getElementById(o))||(q.current.size&&q.current.get(t.id)&&(null===(a=q.current)||void 0===a||null===(l=a.get(null==t?void 0:t.id))||void 0===l||l.onClose()),!$.current.size||!(c=$.current.get("".concat(t.id,"_root")))))return[3,2];return[4,c.unmount()];case 1:s.sent(),s.label=2;case 2:return d=(0,r.jsx)("div",{id:o,className:"inline-flex"}),e.sprite.innerHTML=(0,k.Dq)(d).toString(),(i=document.getElementById(o))&&(u=(0,C.createRoot)(i),$.current.set("".concat(t.id,"_root"),u),u.render((0,r.jsx)(P,{ref:function(n){n&&q.current.set(t.id,n)},commentScene:t,onCreateCommentScene:ng,onUpdateCommentScene:nb,onDeleteCommentScene:nw}))),[2]}})}),function(n,o,t){return i.apply(this,arguments)}),[nx,ng,nw,nb]),nD=(0,d.useCallback)(function(n){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=nE(n),e=t.krpano,i=t.name;n.isOwnerTour&&e.set("hotspot['".concat(i,"'].ondown"),"draghotspot()"),e.set("hotspot['".concat(i,"'].onloaded"),function(){nN(e,i,n)}),o?nN(e,i,n):e.call("addhotspot('".concat(i,"')"))},[nN,nE]),nW=(0,d.useCallback)(function(n){return W[w].call("removehotspot('commentscene-".concat(n,"-").concat(w,"')"))},[w]),nG=(0,d.useCallback)(function(n){return nD(n,!0)},[nD]),nU=(0,d.useCallback)(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null==n||n.map(function(n){return nH(n,o)})},[nH]),nZ=(0,x.Ds)(function(){return nS()},150),nV=(0,x.Ds)(function(){return nA()},150),nY=(0,d.useCallback)(function(){var n=W[w].get("sceneId");n&&((null==a?void 0:a.id)!==n||no?B(n):window[w].call("reset_view()"))},[no,w,B,null==a?void 0:a.id]),nB=(0,d.useCallback)((0,_._)(function(){var n,o,t,e,i,l,r,c,d;return(0,y.Jh)(this,function(u){switch(u.label){case 0:if(!(a&&!K.current))return[3,7];if(!(!no||!(null==nl?void 0:nl.isShowOnStart))||(nz(),no&&(null==a?void 0:null===(n=a.config)||void 0===n?void 0:n.isLittlePlanet)&&"flat"!==a.media.subType&&(null==nc?void 0:nc.mode)!=="little_planet"&&nI(),(null==a?void 0:null===(o=a.config)||void 0===o?void 0:o.isLittlePlanet)||(null==nc?void 0:nc.mode)==="little_planet"||W[w].call("tween(view.tx|view.ty|view.tz|view.ox|view.oy|view.oz|view.fisheye, calc(''+image.ox+'|'+image.oy+'|'+image.oz+'|0|0|0|0'), 0.1, default)"),nL(Y||"flat"===a.media.subType,na.mode||"drag"),"flat"!==a.media.subType&&z&&nM(z),!(null==a?void 0:a.hotspots)))return[3,6];t=0,u.label=1;case 1:if(!(t<a.hotspots.length))return[3,6];if(!((d=a.hotspots[t]).polygon||"chevron"===d.type||!W[w].get("webvr.isenabled")))return[3,3];return[4,nH(d)];case 2:u.sent(),u.label=3;case 3:if(!(!d.polygon&&("point"===d.type||"video"===d.type&&(null===(l=d.config)||void 0===l?void 0:null===(i=l.video)||void 0===i?void 0:null===(e=i.url)||void 0===e?void 0:e.endsWith(".mp4"))||"sound"===d.type&&(null===(c=d.config)||void 0===c?void 0:null===(r=c.sound)||void 0===r?void 0:r.action)||"image"===d.type)))return[3,5];return[4,nR(d)];case 4:u.sent(),u.label=5;case 5:return t++,[3,1];case 6:W[w].call("garrows_init()"),K.current=!0,E(!0),u.label=7;case 7:return[2]}})}),[a,w,E,z,no,nH,Y,nR,nl,nL,nM,na.mode,null==nc?void 0:nc.mode,nz,nI]),nK=(0,d.useCallback)(function(){var n=W[w].get("mouse.clickx"),o=W[w].get("mouse.clicky"),t=W[w].screentosphere(n,o);ny({id:(0,x.D9)(),ath:t.x,atv:t.y,message:"",scene:(null==a?void 0:a.id)||"",scene_id:(null==a?void 0:a.id)||""}),n_(!0)},[a,w,ny,n_]);return(0,d.useImperativeHandle)(o,function(){return{getContainer:function(){return X.current},viewPlanet:function(){W[w].call("cm_littleplanet_view")},viewNormal:function(){W[w].call("cm_normal_view")},viewMirrorBall:function(){W[w].call("mirror_ball_view")},viewFullscreen:function(){var n,o,t;(n=document).fullscreenElement||n.mozFullScreenElement||n.webkitFullscreenElement||n.msFullscreenElement?(o=document).exitFullscreen?o.exitFullscreen():o.msExitFullscreen?o.msExitFullscreen():o.webkitExitFullscreen?o.webkitExitFullscreen():o.mozCancelFullScreen&&o.mozCancelFullScreen():(t=document.body).requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():(0,x.lR)("error","Your browser does not support fullscreen mode")},viewWebvr:function(){W[w].call("webvr.enterVR()")},toggleGyro:function(){W[w].call("toggleGyroscope()")},startAutoRotate:function(n){var o=n.speed,t=n.wait_time,e=void 0===t?20:t;W[w].call("startrotation(".concat(void 0===o?10:o,", ").concat(e,")"))},stopAutoRotate:function(){W[w].call("stoprotation")},toLeft:function(){W[w].call("set(hlookat_moveforce,-0.75)")},toRight:function(){W[w].call("set(hlookat_moveforce,+0.75)")},stopToHorizontal:function(){W[w].call("set(hlookat_moveforce,0)")},toUp:function(){W[w].call("set(vlookat_moveforce,-0.75)")},toDown:function(){W[w].call("set(vlookat_moveforce,+0.75)")},stopToVertical:function(){W[w].call("set(vlookat_moveforce,0)")},removeAllChevronHotspot:function(n){n.filter(function(n){return"chevron"===n.type}).forEach(function(n){var o="hotspot-".concat(n.id,"-").concat(w,"-type").concat(n.type,"-").concat(n.polygon?"ispolygon":"unpolygon");W[w].call("removenavigationelements(".concat(o,")"))})},triggerSound:function(){nm(!0)},destroySound:function(){W[w]&&W[w].call("destroy_sound()")},muteAllSound:function(n){var o;null==n||null===(o=n.hotspots)||void 0===o||o.forEach(function(n){var o,t,e,i,l,r,a,c,d,u,s="hotspot-".concat(n.id,"-").concat(w,"-type").concat(n.type,"-").concat(n.polygon?"ispolygon":"unpolygon");"sound"===n.type&&(null===(o=n.config)||void 0===o?void 0:o.sound)?W[w].call("toggle_mute_sound(".concat("".concat(s),", true)")):"instructor"===n.type&&(null===(e=n.config)||void 0===e?void 0:null===(t=e.instructor)||void 0===t?void 0:t.media)?W[w].set("hotspot[".concat(s,"].muted"),!0):"media"===n.type&&(null===(l=n.config)||void 0===l?void 0:null===(i=l.media)||void 0===i?void 0:i.type)==="media-video"&&(null==n?void 0:null===(c=n.config)||void 0===c?void 0:null===(a=c.media)||void 0===a?void 0:null===(r=a.media)||void 0===r?void 0:r.src)&&(null===(u=Q.current)||void 0===u||null===(d=u.get(n.id))||void 0===d||d.onToggleMute(!0))})},unmuteAllSound:function(n){var o;null==n||null===(o=n.hotspots)||void 0===o||o.forEach(function(n){var o,t,e,i,l,r,a,c,d,u,s="hotspot-".concat(n.id,"-").concat(w,"-type").concat(n.type,"-").concat(n.polygon?"ispolygon":"unpolygon");"sound"===n.type&&(null===(o=n.config)||void 0===o?void 0:o.sound)?W[w].call("toggle_mute_sound(".concat("".concat(s),", false)")):"instructor"===n.type&&(null===(e=n.config)||void 0===e?void 0:null===(t=e.instructor)||void 0===t?void 0:t.media)?W[w].set("hotspot[".concat(s,"].muted"),!1):"media"===n.type&&(null===(l=n.config)||void 0===l?void 0:null===(i=l.media)||void 0===i?void 0:i.type)==="media-video"&&(null==n?void 0:null===(c=n.config)||void 0===c?void 0:null===(a=c.media)||void 0===a?void 0:null===(r=a.media)||void 0===r?void 0:r.src)&&(null===(u=Q.current)||void 0===u||null===(d=u.get(n.id))||void 0===d||d.onToggleMute(!1))})},get:function(n){return W[w].get(n)},set:function(n,o){W[w].set(n,o)},call:function(n){W[w].call(n)},onAddCommentScene:function(n){nD(n)},onRemoveCommentScene:function(n){nW(n)},onReplaceCommentScene:function(n){nG(n)},focusOnCommentScene:function(n,o){var t="lookat(".concat(n.ath,", ").concat(n.atv,", null, null, true, true, ").concat(o(),")");W[w].call(t)},loadXml:function(n){W[w].call("load_menu_vr(".concat(n,")"))}}},[w,nD,nW,nG]),(0,d.useEffect)(function(){!ns&&w&&nv((0,F.Z)(w))},[ns,w]),(0,d.useEffect)(function(){var n,o;ns&&ns.init(g,"".concat("/static","/core/tour.xml"),{mypath:"/static",watermarkEnabled:!(null==nd?void 0:nd.isOffWatermark),watermarkURL:(null==nd?void 0:nd.watermarkURL)||(0,x.HH)((null==nn?void 0:null===(n=nn.logo)||void 0===n?void 0:n.src)||"")?null==nn?void 0:null===(o=nn.logo)||void 0===o?void 0:o.src:""})},[ns,g]),(0,d.useEffect)(function(){ns&&p&&(E(!1),K.current=!1,a&&nF(a))},[null==a?void 0:a._id,ns]),(0,d.useEffect)(function(){return W[w]&&ns&&(W[w].set("events.webvr_onexitvr",nU.bind(H,(null==a?void 0:a.hotspots.filter(function(n){return!n.polygon}))||[],!1)),W[w].set("events.reset_view_action",nU.bind(H,null==a?void 0:a.hotspots,!1)),W[w].addEventListener("onloadcomplete",nB),W[w].addEventListener("onviewchange",nZ),W[w].addEventListener("onmousewheel",nV),W[w].addEventListener("ondoubleclick",nK)),function(){W[w]&&(W[w].removeEventListener("onloadcomplete",nB),W[w].removeEventListener("onviewchange",nZ),W[w].removeEventListener("onmousewheel",nV),W[w].removeEventListener("ondoubleclick",nK),nm(!1),q.current=new Map([]),Q.current=new Map([]))}},[ns,a._id]),(0,d.useEffect)(function(){return W[w]&&ns&&W[w].addEventListener("onnewpanovr",nY),function(){W[w]&&W[w].removeEventListener("onnewpanovr",nY)}},[ns,a,no]),(0,d.useEffect)(function(){var n;T&&nf&&(null==a||null===(n=a.hotspots)||void 0===n||n.forEach(function(n){var o,t,e,i,l,r,a,c,d,u,s,v,p;"sound"===n.type&&(null===(o=n.config)||void 0===o?void 0:o.sound)!==void 0&&(null===(e=n.config)||void 0===e?void 0:null===(t=e.sound)||void 0===t?void 0:t.auto_play)||"instructor"===n.type&&(null===(l=n.config)||void 0===l?void 0:null===(i=l.instructor)||void 0===i?void 0:i.media)&&!(null===(a=n.config)||void 0===a?void 0:null===(r=a.instructor)||void 0===r?void 0:r.paused_on_start)?nO(n,J.current):"media"===n.type&&(null===(d=n.config)||void 0===d?void 0:null===(c=d.media)||void 0===c?void 0:c.type)==="media-video"&&(null==n?void 0:null===(s=n.config)||void 0===s?void 0:null===(u=s.media)||void 0===u?void 0:u.volume)&&Q.current.get(n.id)&&(null===(p=Q.current)||void 0===p||null===(v=p.get(n.id))||void 0===v||v.onToggleMute(!1))}))},[T,nf]),(0,d.useEffect)(function(){ne&&T&&K.current&&nU((null==a?void 0:a.hotspots)||[],!0)},[ne]),(0,r.jsx)("div",{id:g,ref:X,style:(0,f._)({},{width:"100%",height:"250px"},Z),children:G})}),U=(0,d.memo)(G),Z=c()(function(){return t.e(9884).then(t.bind(t,79884))},{loadableGenerated:{webpack:function(){return[79884]}}}),V=(0,d.memo)(function(n){var o,t,e,i,a,c=n.onChangeScene,p=n.krpanoRefState,h=n.setKrpanoRefState,g=n.setIsTourRendered,b=(0,d.useRef)(null),w=(0,u.v9)(s.U9),_=(0,u.v9)(s.oo),y=(0,u.v9)(s.Y2),x=(0,u.v9)(s.us),k=(0,u.v9)(s.hd),C=(0,u.v9)(s.JB),S=(0,l._)((0,j.yG)("krpanoRef"),2)[1],A=(0,l._)((0,j.gU)("state"),2),O=A[0],L=A[1],M=(0,v.Q)({krpanoRef:p}),T=M.dollhouseXml,P=M.onClickHotspot,E=M.onStopHotspotSound,z=M.onStartHotspotSound,I=M.onChangeAutoChangeScene,F=M.onRemoveAllChevronHotspot,H=M.onToggleModeMultipleStaging,N=(0,d.useMemo)(function(){var n,o,t;return(null==y?void 0:null===(n=y.media)||void 0===n?void 0:n.src_preview)||(null==y?void 0:null===(o=y.media)||void 0===o?void 0:o.src_thumb)||(null==y?void 0:null===(t=y.media)||void 0===t?void 0:t.src)},[null==y?void 0:y.id]),D=(0,d.useMemo)(function(){var n,o;return(null==y?void 0:y.mode)==="staging"&&(null==y?void 0:null===(n=y.staging)||void 0===n?void 0:n.length)&&(null==y?void 0:y.staging.filter(function(n){return n.media}).length)&&!(null==y?void 0:null===(o=y.configStaging)||void 0===o?void 0:o.modeDisplay)},[null==y?void 0:y.id]),W=(0,d.useMemo)(function(){var n;return(((null==y?void 0:y.mode)==="staging"&&(null==y?void 0:null===(n=y.configStaging)||void 0===n?void 0:n.modeDisplay)?null==y?void 0:y.staging:[])||[]).filter(function(n){return n.media}).map(function(n){var o,t,e;return(0,m._)((0,f._)({},n),{urlTour:(null==n?void 0:null===(o=n.media)||void 0===o?void 0:o.src_preview)||(null==n?void 0:null===(t=n.media)||void 0===t?void 0:t.src_thumb)||(null==n?void 0:null===(e=n.media)||void 0===e?void 0:e.src),config:null==y?void 0:y.config,configPlugin:null==y?void 0:y.configPlugin})})},[null==y?void 0:y.id]),G=(0,d.useCallback)(function(n){var o=w.find(function(o){return o.id===n});o&&c(o)},[w,c]);return(0,d.useEffect)(function(){k&&(E(),F(k.hotspots),H(!1))},[k]),(0,d.useEffect)(function(){x.on&&y&&z()},[null==y?void 0:y._id,x]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(BeforeAfterSlider,{mode:null!==(a=null==y?void 0:null===(o=y.configStaging)||void 0===o?void 0:o.modeDisplay)&&void 0!==a?a:"",scenes:(null==O?void 0:O.isActiveModeMultipleStaging)?W:[],nadirConfig:_||void 0,firstPane:(0,r.jsx)(U,{ref:function(n){b.current||(b.current=n,h(b.current),g(!0))},nadirConfig:_||void 0,isLoaded:null==O?void 0:O.isLoaded,listScene:w,urlTour:N||"",dollhouseXml:T,setIsLoaded:function(n){L(function(o){return(0,m._)((0,f._)({},o),{isLoaded:n})}),n?S(p):n||S(null)},krpanoId:R.vd,onClickHotspot:P,divId:"krpanoContainerSnapshot",scene:y||void 0,styleContainer:{height:"100%",width:(null==y?void 0:null===(t=y.configStaging)||void 0===t?void 0:t.modeDisplay)==="split"?"100%":"100vw"},onChangeAutoChangeScene:I,isTurnOffFollowMode:!!W.length||!C.enable,onChangeScene:G})}),D&&(0,r.jsx)(Z,{scenes:(null==y?void 0:null===(e=y.staging)||void 0===e?void 0:e.map(function(n){return(0,m._)((0,f._)({},n),{config:null==y?void 0:y.config})}))||[],callKrpano:null===(i=b.current)||void 0===i?void 0:i.call})]})});function styled_templateObject(){var n=(0,g._)(["\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.04);\n  user-select: none;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  .--image-container {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: transform 0.1s ease-in-out;\n    .--image {\n      max-width: 100%;\n      max-height: 100%;\n      object-fit: contain;\n      pointer-events: none;\n    }\n  }\n  .--navigation-button {\n    position: absolute;\n    top: 50%;\n    transform: translateY(-50%);\n    background-color: rgba(50, 50, 50, 0.6);\n    color: white;\n    border: none;\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    font-size: 16px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    z-index: 10;\n    transition: opacity 0.3s ease-in-out;\n    opacity: 0.7;\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n    &:hover {\n      background-color: rgba(50, 50, 50, 0.8);\n      opacity: 1;\n    }\n    &:disabled {\n      opacity: 0.5;\n      cursor: not-allowed;\n      background-color: rgba(50, 50, 50, 0.4);\n    }\n    &.--navigation-button-left {\n      left: 15px;\n    }\n    &.--navigation-button-right {\n      right: 15px;\n    }\n  }\n"]);return styled_templateObject=function(){return n},n}var Y=b.ZP.div.withConfig({displayName:"styled__TourRenderSceneFlat360Wrapper",componentId:"Panoee__sc-4453a878-0"})(styled_templateObject()),B=c()(function(){return t.e(9480).then(t.bind(t,29480))},{loadableGenerated:{webpack:function(){return[29480]}},ssr:!1}),K=(0,d.memo)(function(n){var o,t,e,i=n.setIsTourRendered,a=(0,d.useRef)(0),c=(0,d.useRef)(0),v=(0,d.useRef)(null),p=(0,d.useRef)(null),h=(0,u.v9)(s.Y2),g=(0,l._)((0,d.useState)({zoomLevel:1,imagesLoaded:0,currentFrame:1,minZoomLevel:1,maxZoomLevel:5,isLoading:!0,isDragging:!1,isAnimating:!1}),2),b=g[0],w=g[1],_=(0,l._)((0,d.useState)([]),2),y=_[0],x=_[1],k=(0,l._)((0,d.useState)([]),2),C=k[0],j=k[1],S=null!==(e=Number(null==h?void 0:null===(o=h.object360)||void 0===o?void 0:o.totalImages))&&void 0!==e?e:1,A=(0,d.useMemo)(function(){return Math.round(b.imagesLoaded/S*100)},[b.imagesLoaded,S]),L=(0,d.useMemo)(function(){var n;return(null==h?void 0:null===(n=h.object360)||void 0===n?void 0:n.lvl)&&b.zoomLevel>2.5&&C[b.currentFrame]},[C,null==h?void 0:null===(t=h.object360)||void 0===t?void 0:t.lvl,b.zoomLevel,b.currentFrame]),M=(0,d.useMemo)(function(){var n,o,t;return L?(null===(n=C[b.currentFrame-1])||void 0===n?void 0:n.src)||(null===(o=y[b.currentFrame-1])||void 0===o?void 0:o.src):null===(t=y[b.currentFrame-1])||void 0===t?void 0:t.src},[L,C,b.currentFrame,y]),T=(0,d.useCallback)(function(n){n.preventDefault();var o=-.01*n.deltaY,t=Math.max(b.minZoomLevel,Math.min(b.maxZoomLevel,b.zoomLevel+o));w(function(n){return(0,m._)((0,f._)({},n),{zoomLevel:t})})},[b.minZoomLevel,b.maxZoomLevel,b.zoomLevel]),P=(0,d.useCallback)(function(n){b.isLoading||b.isAnimating||(p.current&&clearInterval(p.current),w(function(n){return(0,m._)((0,f._)({},n),{isDragging:!0})}),c.current=n.clientY,a.current=n.clientX)},[b.isLoading,b.isAnimating]),E=(0,d.useCallback)(function(n){if(b.isDragging&&!b.isLoading&&!b.isAnimating){var o=n.clientX,t=n.clientY,e=o-a.current,i=t-c.current;if(a.current=o,0!==e||0!==i){var l=Math.floor(Math.abs(e)/5)||1,r=(e<0?1:-1)*1;w(function(n){for(var o=n.currentFrame+r*l;o>S;)o-=S;for(;o<1;)o+=S;return(0,m._)((0,f._)({},n),{currentFrame:o})})}}},[S,!1,b.isLoading,b.isDragging,b.isAnimating]),z=(0,d.useCallback)(function(){w(function(n){return(0,m._)((0,f._)({},n),{isDragging:!1})})},[]);return(0,d.useEffect)(function(){w(function(n){return(0,m._)((0,f._)({},n,null==h?void 0:h.object360),{isLoading:!0,imagesLoaded:0})});for(var n=[],o=[],t=0,loadImage=function(n){var o,e,l,r,a,c,d,u,s,v=arguments.length>1&&void 0!==arguments[1]&&arguments[1],p=new Image,g=n.toString().padStart((null==h?void 0:null===(o=h.object360)||void 0===o?void 0:o.padLength)||5,"0");return p.src="".concat("https://assets.panoee.com","/").concat((null==h?void 0:null===(e=h.object360)||void 0===e?void 0:e.lvl)&&(null==h?void 0:null===(l=h.object360)||void 0===l?void 0:l.lvl.length)?v&&(null==h?void 0:null===(r=h.object360)||void 0===r?void 0:r.lvl.length)>1?null==h?void 0:null===(a=h.object360)||void 0===a?void 0:a.lvl[1]:null==h?void 0:null===(c=h.object360)||void 0===c?void 0:c.lvl[0]:null==h?void 0:null===(d=h.object360)||void 0===d?void 0:d.imagePath).concat(null==h?void 0:null===(u=h.object360)||void 0===u?void 0:u.imagePrefix).concat(g,".").concat(null==h?void 0:null===(s=h.object360)||void 0===s?void 0:s.imageExt),p.onload=function(){v||(t++,w(function(n){return(0,m._)((0,f._)({},n),{imagesLoaded:t})})),t===S&&(w(function(n){return(0,m._)((0,f._)({},n),{isLoading:!1})}),i(!0))},p.onerror=function(n){},p},e=1;e<=S;e++)n.push(loadImage(e)),o.push(loadImage(e,!0));return x(n),j(o),function(){n.forEach(function(n){n.onload=null,n.onerror=null}),o.forEach(function(n){n.onload=null,n.onerror=null}),x([]),j([])}},[null==h?void 0:h.id]),(0,d.useEffect)(function(){if(!b.isAnimating){var handleKeyDown=function(n){switch(n.key){case"ArrowLeft":w(function(n){return(0,m._)((0,f._)({},n),{currentFrame:(n.currentFrame-1)%S||S})});break;case"ArrowRight":w(function(n){return(0,m._)((0,f._)({},n),{currentFrame:(n.currentFrame+1)%S||S})});break;case"ArrowUp":w(function(n){return(0,m._)((0,f._)({},n),{zoomLevel:Math.min(n.maxZoomLevel,n.zoomLevel+.1)})});break;case"ArrowDown":w(function(n){return(0,m._)((0,f._)({},n),{zoomLevel:Math.max(n.minZoomLevel,n.zoomLevel-.1)})})}};return window.addEventListener("keydown",handleKeyDown),function(){window.removeEventListener("keydown",handleKeyDown)}}},[!0,b.isAnimating]),(0,d.useEffect)(function(){var n=v.current;return n&&n.addEventListener("wheel",T,{passive:!1}),function(){n&&n.removeEventListener("wheel",T)}},[T]),(0,r.jsx)(O.default,{loading:b.isLoading,description:"Loading... ".concat(A,"%"),children:(0,r.jsxs)(Y,{ref:v,onMouseDown:P,onMouseMove:E,onMouseUp:z,onMouseLeave:z,style:{cursor:b.isDragging?"grabbing":"grab"},children:[M&&(0,r.jsx)("div",{className:"--image-container",style:{transform:"scale(".concat(b.zoomLevel,")")},children:(0,r.jsx)("img",{src:M,alt:"Frame ".concat(b.currentFrame),className:"--image",draggable:!1})}),(0,r.jsx)(B,{scene:h,viewerState:b,setViewerState:w,totalFrames:S})]})})}),J=c()(function(){return t.e(6505).then(t.bind(t,26505))},{loadableGenerated:{webpack:function(){return[26505]}}}),X=c()(function(){return t.e(925).then(t.bind(t,50925))},{loadableGenerated:{webpack:function(){return[50925]}}}),q=c()(function(){return t.e(5569).then(t.bind(t,55569))},{loadableGenerated:{webpack:function(){return[55569]}}}),$=c()(function(){return t.e(9669).then(t.bind(t,79669))},{loadableGenerated:{webpack:function(){return[79669]}}}),Q=c()(function(){return t.e(1767).then(t.bind(t,1767))},{loadableGenerated:{webpack:function(){return[1767]}}}),nn=c()(function(){return t.e(9575).then(t.bind(t,39552))},{loadableGenerated:{webpack:function(){return[39552]}},ssr:!1}),no=(0,d.memo)(function(n){var o,t=n.onChangeScene,e=n.onNextScene,i=n.children,a=(0,u.v9)(s.Y2),c=(0,u.v9)(s.XX),f=(0,l._)((0,d.useState)(!1),2),m=f[0],h=f[1],g=(0,l._)((0,d.useState)(null),2),b=g[0],w=g[1],_=(0,v.Q)({krpanoRef:null}),y=_.isShowIconMap,x=_.isShowIconFloorplan;return(0,r.jsxs)(p.jQ,{children:[c?(0,r.jsx)(nn,{}):(null==a?void 0:null===(o=a.object360)||void 0===o?void 0:o.imagePrefix)?(0,r.jsx)(K,{setIsTourRendered:h}):(0,r.jsx)(V,{onChangeScene:t,setIsTourRendered:h,krpanoRefState:b,setKrpanoRefState:w}),m&&(0,r.jsxs)(r.Fragment,{children:[i&&i({krpanoRef:b}),b&&(0,r.jsx)(X,{krpanoRef:b}),b&&(0,r.jsx)(q,{krpanoRef:b,onNextScene:e}),(0,r.jsx)(Q,{})]}),y&&(0,r.jsx)(J,{onChangeScene:t}),x&&(0,r.jsx)($,{onChangeScene:t})]})})},86111:function(n,o,t){t.d(o,{EU:function(){return c},Md:function(){return l},Nt:function(){return a},jQ:function(){return r}});var e=t(82729),i=t(94589);function _templateObject(){var n=(0,e._)([""]);return _templateObject=function(){return n},n}function _templateObject1(){var n=(0,e._)(["\n  width: 100%;\n  height: 100%;\n  position: relative;\n  overflow: hidden;\n"]);return _templateObject1=function(){return n},n}function _templateObject2(){var n=(0,e._)(["\n  width: 100%;\n  height: 100%;\n  iframe {\n    width: 100%;\n    height: 100%;\n  }\n"]);return _templateObject2=function(){return n},n}function _templateObject3(){var n=(0,e._)(["\n  position: absolute;\n  z-index: 21;\n  bottom: 1rem;\n  right: 1rem;\n  opacity: 0;\n  transform: translateX(1rem);\n  transition: var(--transition-smooth);\n  border-radius: 8px;\n  background-color: var(--color-primary);\n  padding: 1rem;\n  width: 350px;\n  height: auto;\n  pointer-events: none;\n  article {\n    * {\n      color: var(--color-text);\n    }\n    p:last-child {\n      margin: 0;\n    }\n\n    figure {\n      width: 100% !important;\n      height: auto !important;\n      img {\n        width: 100% !important;\n        height: auto !important;\n      }\n    }\n  }\n\n  &.active {\n    opacity: 1;\n    transform: none;\n  }\n"]);return _templateObject3=function(){return n},n}var l=i.ZP.div.withConfig({displayName:"styled__TourSettingWrapper",componentId:"Panoee__sc-2d69d3ae-0"})(_templateObject()),r=i.ZP.div.withConfig({displayName:"styled__TourWrapper",componentId:"Panoee__sc-2d69d3ae-1"})(_templateObject1()),a=i.ZP.div.withConfig({displayName:"styled__MatterportContainerWrapper",componentId:"Panoee__sc-2d69d3ae-2"})(_templateObject2()),c=i.ZP.div.withConfig({displayName:"styled__HotspotCompactInfoWrapper",componentId:"Panoee__sc-2d69d3ae-3"})(_templateObject3())}}]);
//# sourceMappingURL=1309.74d10ee0f44dc85e.js.map