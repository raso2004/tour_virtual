"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9480],{29480:function(e,n,t){t.r(n);var r=t(72253),i=t(14932),a=t(85893),u=t(67294),s=t(61935),c=t(25617),o=(0,u.memo)(function(e){var n,t,o=e.scene,l=e.viewerState,m=e.setViewerState,f=e.totalFrames,g=(0,u.useRef)(null),d=(0,u.useRef)(null),b=(0,u.useRef)(null),v=(0,c.v9)(s.dm),p=(0,u.useCallback)(function(e){if(!l.isAnimating&&!l.isLoading){m(function(e){return(0,i._)((0,r._)({},e),{isAnimating:!0})});var n=e-l.currentFrame,t=n;Math.abs(n)>f/2&&(t=n>0?n-f:n+f);var a=t>0?1:-1,u=Math.abs(t),s=0,performStep=function(){if(s>=u){m(function(n){return(0,i._)((0,r._)({},n),{currentFrame:e,isAnimating:!1})}),g.current&&clearTimeout(g.current);return}s++,m(function(e){var n=e.currentFrame+a;return n>f&&(n=1),n<1&&(n=f),(0,i._)((0,r._)({},e),{currentFrame:n})}),g.current=setTimeout(performStep,30)};performStep()}},[f,m,l.isLoading,l.isAnimating,l.currentFrame]),h=(0,u.useCallback)(function(e){if((null==o?void 0:null===(n=o.object360)||void 0===n?void 0:n.presets.length)&&!l.isAnimating&&!l.isLoading){var n,t=l.currentFrame,r=(-1===e?o.object360.presets.slice().reverse():o.object360.presets).find(function(n){return 1===e?n.frame>t||n.frame===t:n.frame<t||n.frame===t})||o.object360.presets[0],i=o.object360.presets.indexOf(r);p((t===r.frame?o.object360.presets[((i||o.object360.presets.length)+e)%o.object360.presets.length]:r).frame)}},[p,o.object360.presets,l.currentFrame,l.isAnimating,l.isLoading]);return(0,u.useEffect)(function(){return!v.on||!v.enabled||l.isDragging||l.isLoading||l.isAnimating?d.current&&(clearInterval(d.current),clearTimeout(b.current)):b.current=setTimeout(function(){d.current=setInterval(function(){m(function(e){return(0,i._)((0,r._)({},e),{currentFrame:e.currentFrame%f+1})})},v.speed/2*1e3)},1e3*v.waitTime),function(){d.current&&clearInterval(d.current),b.current&&clearTimeout(b.current)}},[v,l.isLoading,l.isDragging,l.isAnimating]),(0,a.jsx)(a.Fragment,{children:(null==o?void 0:null===(t=o.object360)||void 0===t?void 0:null===(n=t.presets)||void 0===n?void 0:n.length)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:"--navigation-button --navigation-button-left",onClick:function(){return h(-1)},disabled:l.isAnimating||l.isLoading,children:"◀"}),(0,a.jsx)("button",{className:"--navigation-button --navigation-button-right",onClick:function(){return h(1)},disabled:l.isAnimating||l.isLoading,children:"▶"})]})})});n.default=o}}]);
//# sourceMappingURL=9480.a2cd55ea33adcaf2.js.map