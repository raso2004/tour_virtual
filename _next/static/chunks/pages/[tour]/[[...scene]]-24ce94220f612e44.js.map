{"version":3,"file":"static/chunks/pages/[tour]/[[...scene]]-24ce94220f612e44.js","mappings":"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","sources":["webpack://_N_E/?2a5d","webpack://_N_E/./pages/[tour]/[[...scene]]/index.tsx","webpack://_N_E/./node_modules/next/script.js","webpack://_N_E/<anon>"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/[tour]/[[...scene]]\",\n      function () {\n        return require(\"private-next-pages/[tour]/[[...scene]]/index.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/[tour]/[[...scene]]\"])\n      });\n    }\n  ","/* eslint-disable react/no-danger */\nimport dynamic from 'next/dynamic';\nimport { END } from 'redux-saga';\nimport { useEffect, useMemo } from 'react';\nimport {\n  actions,\n  GET_DETAIL_PROJECT,\n  CHECK_PROJECT_IS_VALID,\n} from '@containers/Home/slice';\nimport { wrapper, SagaStore } from 'store';\nimport { NextSeo } from 'next-seo';\nimport { useRouter } from 'next/router';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  selectConfigLittlePlanetProject,\n  selectConfigFirstSceneProject,\n  selectFirstSceneMediaProject,\n  selectGATagTrackingProject,\n  selectFeatureImageProject,\n  selectGATrackingProject,\n  selectThumbnailProject,\n  selectMetaDataProject,\n  selectTitleProject,\n  selectListScene,\n  selectTenant,\n} from '@containers/Home/selectors';\nimport Script from 'next/script';\nimport {\n  LIST_FAVICON_DEFAULT,\n  LIST_LINK_STYLE_SHEET,\n} from '@containers/Home/constants';\nimport { parse } from 'cookie';\nimport { KEY_COOKIE } from '@type/customType';\n\nconst Home = dynamic(() => import('containers/Home'), {\n  loading: () => <span>Loading</span>,\n});\n\ninterface Props {\n  slug: string;\n  host: string;\n  passwordTourCookie?: string;\n  listProjectGuardOpenedCookie?: string;\n  listFormCaptureOpenedCookie?: string;\n}\n\nfunction PublicContainer({\n  slug,\n  host,\n  passwordTourCookie,\n  listProjectGuardOpenedCookie,\n  listFormCaptureOpenedCookie,\n}: Props) {\n  const router = useRouter();\n  const dispatch = useDispatch();\n\n  const tenant = useSelector(selectTenant);\n  const title = useSelector(selectTitleProject);\n  const listScene = useSelector(selectListScene);\n  const metadata = useSelector(selectMetaDataProject);\n  const thumbnail = useSelector(selectThumbnailProject);\n  const ga_tracking = useSelector(selectGATrackingProject);\n  const feature_image = useSelector(selectFeatureImageProject);\n  const first_scene = useSelector(selectConfigFirstSceneProject);\n  const ggtag_tracking = useSelector(selectGATagTrackingProject);\n  const first_scene_media = useSelector(selectFirstSceneMediaProject);\n  const config_little_planet = useSelector(selectConfigLittlePlanetProject);\n\n  const detailFirstScene = useMemo(\n    () => listScene.filter(item => item.id === first_scene)[0] || undefined,\n    [listScene, first_scene],\n  );\n\n  const images = useMemo(() => {\n    const imgs: any = [];\n    if (thumbnail?.src)\n      imgs.push({\n        url: thumbnail?.src,\n        width: 800,\n        height: 600,\n        alt: thumbnail?.name,\n      });\n\n    if (feature_image)\n      imgs.push({\n        url: feature_image,\n        width: 800,\n        height: 600,\n        alt: '',\n      });\n\n    if (first_scene_media?.src)\n      imgs.push({\n        url:\n          first_scene_media?.src_thumb ||\n          first_scene_media?.src_preview ||\n          first_scene_media?.src,\n        width: 800,\n        height: 600,\n        alt: first_scene_media?.name,\n      });\n\n    return imgs;\n  }, [thumbnail, feature_image, first_scene_media]);\n\n  useEffect(() => {\n    if (listScene && listScene.length) {\n      let scene = detailFirstScene\n        ? { ...detailFirstScene }\n        : { ...listScene[0] };\n      if (router.query.scene) {\n        const id = router.query.scene.length\n          ? router.query.scene[0]\n          : router.query.scene;\n        const sceneMatched = id\n          ? listScene.find(item => item.id === id)\n          : listScene[0];\n        if (sceneMatched) scene = sceneMatched;\n      }\n      // NOTE: add intro little planet for first scene loaded\n      scene.config = scene?.config || {};\n      scene.config = {\n        ...scene.config,\n        isLittlePlanet: config_little_planet?.enable || false,\n        timeTransitionLittlePlanet: config_little_planet?.transition_time || 2,\n      };\n      dispatch(actions.setSceneSelected(scene));\n      dispatch(CHECK_PROJECT_IS_VALID({ slug, host }));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [listScene.length]);\n\n  return (\n    <>\n      {tenant && (\n        <NextSeo\n          title={metadata?.title || title}\n          description={metadata?.description || tenant?.description}\n          canonical={`${tenant?.domain_public}/${router.query.tour}`}\n          additionalMetaTags={[\n            {\n              property: 'name',\n              content: tenant?.name,\n            },\n            {\n              name: 'application-name',\n              content: tenant?.name,\n            },\n          ]}\n          additionalLinkTags={\n            metadata?.favicon || !tenant?.domain_public?.includes('panoee')\n              ? [\n                  ...[\n                    {\n                      rel: 'shortcut icon',\n                      href: metadata?.favicon || tenant?.favicon?.src,\n                    },\n                  ],\n                  ...(tenant?.domain_public?.includes('panoee')\n                    ? LIST_LINK_STYLE_SHEET\n                    : []),\n                ]\n              : [...LIST_FAVICON_DEFAULT, ...LIST_LINK_STYLE_SHEET]\n          }\n          openGraph={{\n            type: 'website',\n            url: `${tenant?.domain_public}/${router.query.tour}`,\n            title: metadata?.title || title,\n            description: metadata?.description || tenant?.description,\n            images,\n            site_name: tenant?.name,\n            profile: {\n              username: router.query.username as string,\n            },\n          }}\n          facebook={{\n            appId: process.env.NEXT_PUBLIC_FB_APP_ID || '2086263614924092',\n          }}\n        />\n      )}\n      {ga_tracking && (\n        <>\n          <Script\n            src={`https://www.googletagmanager.com/gtag/js?id=${ga_tracking}`}\n          />\n          <Script\n            id=\"gg-tag\"\n            dangerouslySetInnerHTML={{\n              __html: `\n                window.dataLayer = window.dataLayer || [];\n                function gtag(){dataLayer.push(arguments);}\n                gtag('js', new Date());\n                gtag('config', '${ga_tracking}', {\n                  page_path: window.location.pathname,\n                });\n              `,\n            }}\n          />\n        </>\n      )}\n      {ggtag_tracking && (\n        <>\n          <Script\n            src={`https://www.googletagmanager.com/gtag/js?id=${ggtag_tracking}`}\n          />\n          <Script\n            id=\"gg-tag-1\"\n            dangerouslySetInnerHTML={{\n              __html: `\n                window.dataLayer = window.dataLayer || [];\n                function gtag(){dataLayer.push(arguments);}\n                gtag('js', new Date());\n\n                gtag('config', '${ggtag_tracking}');\n              `,\n            }}\n          />\n        </>\n      )}\n      <Home\n        isPublic\n        passwordTourCookie={passwordTourCookie}\n        listProjectGuardOpenedCookie={listProjectGuardOpenedCookie}\n        listFormCaptureOpenedCookie={listFormCaptureOpenedCookie}\n      />\n    </>\n  );\n}\n\nexport const getServerSideProps = wrapper.getServerSideProps(\n  store =>\n    async ({ req, query }) => {\n      if (req && req.headers)\n        if (query.tour || (query.scene && query.scene.length === 1)) {\n          const cookies = parse(req.headers.cookie || '');\n          store.dispatch(\n            GET_DETAIL_PROJECT({\n              id: query.tour,\n              host: req.headers?.host || '',\n              isPublic: true,\n            }),\n          );\n          store.dispatch(END);\n          await (store as SagaStore).sagaTask?.toPromise();\n          return {\n            props: {\n              slug: query.tour,\n              host: req.headers?.host || '',\n              listProjectGuardOpenedCookie: cookies\n                ? cookies[KEY_COOKIE.LIST_PROJECT_PASS_GUARD] || null\n                : null,\n              passwordTourCookie: cookies\n                ? cookies[KEY_COOKIE.PASSWORD_TOUR] || null\n                : null,\n              listFormCaptureOpenedCookie: cookies\n                ? cookies[KEY_COOKIE.LIST_FORM_CAPTURE_OPENED] || null\n                : null,\n            },\n          };\n        }\n      return {\n        notFound: true,\n      };\n    },\n);\n\nexport default PublicContainer;\n","module.exports = require('./dist/client/script')\n"],"names":["window","__NEXT_P","push","__webpack_require__","Home","dynamic","Promise","all","e","then","bind","loading","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","span","__webpack_exports__","param","tenant","slug","host","passwordTourCookie","listProjectGuardOpenedCookie","listFormCaptureOpenedCookie","router","useRouter","dispatch","useDispatch","useSelector","selectTenant","title","selectTitleProject","listScene","selectListScene","metadata","selectMetaDataProject","thumbnail","selectThumbnailProject","ga_tracking","selectGATrackingProject","feature_image","selectFeatureImageProject","first_scene","selectConfigFirstSceneProject","ggtag_tracking","selectGATagTrackingProject","first_scene_media","selectFirstSceneMediaProject","config_little_planet","selectConfigLittlePlanetProject","detailFirstScene","useMemo","filter","item","id","undefined","images","imgs","src","url","width","height","alt","name","src_thumb","src_preview","useEffect","length","scene","_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_10__","_","query","sceneMatched","find","config","_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_11__","isLittlePlanet","enable","timeTransitionLittlePlanet","transition_time","actions","setSceneSelected","CHECK_PROJECT_IS_VALID","jsxs","Fragment","NextSeo","description","canonical","domain_public","concat","tour","additionalMetaTags","property","content","additionalLinkTags","favicon","includes","_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_12__","LIST_FAVICON_DEFAULT","LIST_LINK_STYLE_SHEET","rel","href","openGraph","type","site_name","profile","username","facebook","appId","process","Script","dangerouslySetInnerHTML","__html","isPublic","module","exports"],"sourceRoot":""}